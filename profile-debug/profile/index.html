<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Profiling - SC1</title>
    <meta property="og:title" content="Profiling - SC1">
    
    <meta name="twitter:card" content="summary">

    
      
    

    
      
      <meta property="description" content="Profiling in R is fairly straightforward using the profvis package, which builds upon base R’s Rprof functionality.
library(profvis) This is a statistical profiler: it operates by regularly (e.g. &amp;hellip;">
      <meta property="og:description" content="Profiling in R is fairly straightforward using the profvis package, which builds upon base R’s Rprof functionality.
library(profvis) This is a statistical profiler: it operates by regularly (e.g. &amp;hellip;">
      
    

    
    

    

    
    


<link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.12.0/build/styles/github.min.css">



    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Arvo">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Marcellus">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Code+Pro">

<link rel="stylesheet" href="/css/custom.css" />

<link rel="icon" href="/sc1/favicon.ico" type="image/x-icon" />























<nav class="breadcrumbs">
    
        <a href="https://awllee.github.io/sc1/">home / </a>
    
        <a href="https://awllee.github.io/sc1/profile-debug/">profile-debug / </a>
    
        <a href="https://awllee.github.io/sc1/profile-debug/profile/">profile / </a>
    
</nav>

  </head>

  
  <body class="sc1">
    <header class="masthead">
      <h1><a href="/">SC1</a></h1>

<p class="tagline">Statistical Computing 1</p>

      <nav class="menu">
  <input id="menu-check" type="checkbox" hidden/>
  <label id="menu-label" for="menu-check" class="unselectable" hidden>
    <span class="icon close-icon">✕</span>
    <span class="icon open-icon">☰</span>
    <span class="text">Menu</span>
  </label>
  <ul>
  
  
  <li><a href="/sc1/">Home</a></li>
  
  <li><a href="/sc1/intro-r/">Intro to R</a></li>
  
  <li><a href="/sc1/reproducibility/">Reproducibility</a></li>
  
  <li><a href="/sc1/packages/">Packages</a></li>
  
  <li><a href="/sc1/common-r/">Common R</a></li>
  
  <li><a href="/sc1/functional-oo/">Functional / OO</a></li>
  
  <li><a href="/sc1/tidyverse/">Tidyverse</a></li>
  
  <li><a href="/sc1/profile-debug/">Performance / Bugs</a></li>
  
  <li><a href="/sc1/matrices/">Matrices</a></li>
  
  <li><a href="/sc1/optimization/">Optimization</a></li>
  
  <li><a href="/sc1/integration/">Integration</a></li>
  
  
  </ul>
</nav>

    </header>

    <article class="main">
      <header class="title">
      
<h1>Profiling</h1>

<h3>
</h3>
<hr>


      </header>






<script src="/sc1/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/sc1/rmarkdown-libs/jquery/jquery.min.js"></script>
<script src="/sc1/rmarkdown-libs/d3/d3.min.js"></script>
<link href="/sc1/rmarkdown-libs/profvis/profvis.css" rel="stylesheet" />
<script src="/sc1/rmarkdown-libs/profvis/profvis.js"></script>
<script src="/sc1/rmarkdown-libs/profvis/scroll.js"></script>
<link href="/sc1/rmarkdown-libs/highlight/textmate.css" rel="stylesheet" />
<script src="/sc1/rmarkdown-libs/highlight/highlight.js"></script>
<script src="/sc1/rmarkdown-libs/profvis-binding/profvis.js"></script>

<div id="TOC">
<ul>
<li><a href="#updating-a-list-of-primes" id="toc-updating-a-list-of-primes">Updating a list of primes</a></li>
<li><a href="#the-sieve-of-eratosthenes" id="toc-the-sieve-of-eratosthenes">The Sieve of Eratosthenes</a></li>
<li><a href="#comments" id="toc-comments">Comments</a></li>
</ul>
</div>

<p><a href="https://en.wikipedia.org/wiki/Profiling_(computer_programming)">Profiling</a> in R is fairly straightforward using the <a href="https://rstudio.github.io/profvis/"><code>profvis</code></a> package, which builds upon base R’s <code>Rprof</code> functionality.</p>
<pre class="r"><code>library(profvis)</code></pre>
<p>This is a <em>statistical profiler</em>: it operates by regularly (e.g. every few milliseconds) using operating system interrupts to determine what code is being executed. This enables one to build a picture of where the computation is spending most of its time, and is essentially an application of the Monte Carlo method. Although the results are not deterministic, the profiling operation adds very little overhead to the computation.</p>
<p>Statistical profilers can be viewed in contrast to <em>instrumenting profilers</em> of various flavours, which often involve incrementing counters whenever certain events occur. This often involves instrumenting existing code by adding instructions to increment the counters either manually or automatically. For example, incrementing a counter whenever a function is called. Instrumenting profilers can provide very accurate results, but can add substantial overhead to the computation. These tools can be important not only for understanding performance, but also for checking the validity and robustness of code: for example, <a href="https://en.wikipedia.org/wiki/Valgrind">Valgrind</a> is often used in C code to detect memory leaks and memory reference errors.</p>
<p>We consider here profiling various R functions for generating an array of all primes less than or equal to some number.</p>
<div id="updating-a-list-of-primes" class="section level2">
<h2>Updating a list of primes</h2>
<p>A straightforward approach to generating all prime numbers less than some number <span class="math inline">\(N\)</span> is to iterate through the numbers <span class="math inline">\(3,\ldots,N\)</span> and add the current number to the list of primes if there is no divisor of that number in the current list of primes.</p>
<p>In the following, we profile 3 variants of this approach. The first variant is a very inefficient implementation.</p>
<pre class="r"><code>source(&quot;generate-primes-1.R&quot;, keep.source=TRUE)
profvis(generate.primes.upto.1(10000))</code></pre>
<div class="profvis html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-1" style="width:100%;height:600px;"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"message":{"prof":{"time":[1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,4,4,4,4,4,4,5,5,6,6,7,7,8,8,8,8,8,8,8,9,9,9,9,9,9,10,10,11,11,11,11,11,11,12,12,13,13,13,13,13,13,14,14,14,14,14,14,15,15,15,15,15,15,16,16,17,17,18,18,18,18,18,18,19,19,19,19,19,19,20,20,20,20,20,20,21,21,21,21,21,21,22,22,22,22,22,22,23,23,23,23,23,23,24,24,24,24,24,24,25,25,26,26,27,27,27,27,27,27,28,28,28,28,28,28,29,29,29,29,29,29,30,30,31,31,32,32,32,32,32,32,33,33,33,33,33,33,34,34,35,35,35,35,35,35,36,36,36,36,36,36,37,37,37,37,37,37,38,38,39,39,39,39,39,39,40,40,41,41,41,42,42,43,43,43,43,43,43,44,44,45,45,45,45,45,45,45,46,46,47,47,47,47,47,47,48,48,49,49,49,49,49,49,49,50,50,50,50,50,50,51,51,51,51,51,51,52,52,53,53,53,53,53,53,53,54,54,54,54,54,54,54,55,55,56,56,57,57,57,57,57,57,58,58,59,59,59,59,59,59,60,60,61,61,62,62,62,62,62,62,63,63,63,63,63,63,64,64,65,65,65,65,65,65,66,66,67,67,67,67,67,67,68,68,69,69,70,70,71,71,72,72,72,72,72,72,73,73,73,73,73,73,74,74,75,75,76,76,77,77,78,78,79,79,80,80,80,80,80,80,81,81,82,82,82,82,82,82,83,83,83,83,83,83,84,84,85,85,86,86,87,87,87,87,87,87,88,88,88,88,88,88,89,89,90,90,90,90,90,90,91,91,92,92,92,92,92,92,93,93,94,94,94,94,94,94,95,95,95,95,95,95,96,96,96,96,96,96,97,97,97,97,97,97,98,98,98,98,98,98,99,99,99,99,99,99,100,100,101,101,101,102,102,103,103,104,104,104,104,104,104,105,105,105,105,105,105,106,106,106,106,106,106,107,107,107,107,107,107,108,108,108,108,108,108,109,109,109,109,109,109,110,110,111,111,111,111,111,111,112,112,113,113,114,114,114,114,114,114,115,115,115,115,115,115,116,116,116,116,116,116,117,117,117,117,117,117,118,118,118,118,118,118,119,119,120,120,121,121,122,122,122,122,122,122,123,123,124,124,125,125,126,126,127,127,127,127,127,127,127,128,128,128,128,128,128,129,129,129,129,129,129,130,130,131,131,131,131,131,131,131,132,132,132,132,132,132,133,133,133,133,133,133,134,134,134,134,134,134,135,135,135,135,135,135,135,136,136,136,136,136,136,137,137,137,137,137,137,138,138,138,138,138,138,139,139,140,140,140,140,140,140,141,141,141,141,141,141,142,142,142,142,142,142,143,143,143,143,143,143,144,144,144,144,144,144,145,145,146,146,146,146,146,146,147,147,147,147,147,147,148,148,148,148,148,148,149,149,149,149,149,149,150,150,150,150,150,150,151,151,151,151,151,151,152,152,152,152,152,152,153,153,154,154,155,155,155,155,155,155,156,156,157,157,157,157,157,157,158,158,159,159,159,159,159,159,160,160,161,161,161,161,161,161,162,162,162,162,162,162,163,163,163,163,163,163,164,164,164,164,164,164,164,165,165,165,165,165,165],"depth":[2,1,26,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,2,1,2,1,7,6,5,4,3,2,1,6,5,4,3,2,1,2,1,6,5,4,3,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,6,5,4,3,2,1,2,1,3,2,1,2,1,6,5,4,3,2,1,2,1,7,6,5,4,3,2,1,2,1,6,5,4,3,2,1,2,1,7,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,7,6,5,4,3,2,1,7,6,5,4,3,2,1,2,1,2,1,6,5,4,3,2,1,2,1,6,5,4,3,2,1,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,6,5,4,3,2,1,2,1,6,5,4,3,2,1,2,1,2,1,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,2,1,2,1,2,1,2,1,2,1,6,5,4,3,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,6,5,4,3,2,1,2,1,6,5,4,3,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,3,2,1,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,6,5,4,3,2,1,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,2,1,2,1,6,5,4,3,2,1,2,1,2,1,2,1,2,1,7,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,7,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,7,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,2,1,6,5,4,3,2,1,2,1,6,5,4,3,2,1,2,1,6,5,4,3,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,7,6,5,4,3,2,1,6,5,4,3,2,1],"label":["lazyLoadDBfetch","local","exists","findCenvVar","getInlineInfo","tryInline","cmpCall","cmp","h","tryInline","cmpCall","cmp","cmpForBody","h","tryInline","cmpCall","cmp","h","tryInline","cmpCall","cmp","genCode","cmpfun","compiler:::tryCmpfun","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","%%","local","%%","local","<GC>","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","for (j in primes) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","for (j in primes) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","%%","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","<GC>","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","<GC>","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","<GC>","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","<GC>","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","%%","local","%%","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","%%","local","%%","local","%%","local","%%","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","%%","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","for (j in primes) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","%%","local","%%","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","%%","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","%%","local","%%","local","%%","local","<GC>","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","<GC>","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","<GC>","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","for (j in primes) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","<GC>","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local"],"filenum":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,1,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,1,1,null,1,null,1,null,null,null,null,null,1,null,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,1,null,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,1,null,1,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,1,null,1,null,1,null,1,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,1,null,1,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,1,null,1,null,null,null,null,null,1,null,1,null,1,null,1,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null],"linenum":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,6,null,null,6,null,null,null,null,null,5,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,6,null,null,null,null,null,5,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,6,6,null,6,null,6,null,null,null,null,null,6,null,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,6,null,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,6,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,6,null,6,null,6,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,6,null,6,null,6,null,6,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,6,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,5,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,6,6,null,6,null,6,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,6,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,6,null,6,null,null,null,null,null,6,null,6,null,6,null,6,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,5,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null],"memalloc":[11.4383087158203,11.4383087158203,12.0459289550781,12.0459289550781,12.0459289550781,12.0459289550781,12.0459289550781,12.0459289550781,12.0459289550781,12.0459289550781,12.0459289550781,12.0459289550781,12.0459289550781,12.0459289550781,12.0459289550781,12.0459289550781,12.0459289550781,12.0459289550781,12.0459289550781,12.0459289550781,12.0459289550781,12.0459289550781,12.0459289550781,12.0459289550781,12.0459289550781,12.0459289550781,12.0459289550781,12.0459289550781,12.6049957275391,12.6049957275391,12.6049957275391,12.6049957275391,12.6049957275391,12.6049957275391,12.9527282714844,12.9527282714844,12.9527282714844,12.9527282714844,12.9527282714844,12.9527282714844,13.4730529785156,13.4730529785156,13.8221740722656,13.8221740722656,14.3547058105469,14.3547058105469,14.6446685791016,14.6446685791016,14.6446685791016,14.6446685791016,14.6446685791016,14.6446685791016,14.6446685791016,9.16582489013672,9.16582489013672,9.16582489013672,9.16582489013672,9.16582489013672,9.16582489013672,9.76533508300781,9.76533508300781,10.6666259765625,10.6666259765625,10.6666259765625,10.6666259765625,10.6666259765625,10.6666259765625,11.2413635253906,11.2413635253906,9.159912109375,9.159912109375,9.159912109375,9.159912109375,9.159912109375,9.159912109375,9.73097991943359,9.73097991943359,9.73097991943359,9.73097991943359,9.73097991943359,9.73097991943359,10.6006469726562,10.6006469726562,10.6006469726562,10.6006469726562,10.6006469726562,10.6006469726562,11.1943435668945,11.1943435668945,9.12007141113281,9.12007141113281,9.68133544921875,9.68133544921875,9.68133544921875,9.68133544921875,9.68133544921875,9.68133544921875,10.5609741210938,10.5609741210938,10.5609741210938,10.5609741210938,10.5609741210938,10.5609741210938,11.1357650756836,11.1357650756836,11.1357650756836,11.1357650756836,11.1357650756836,11.1357650756836,9.0611572265625,9.0611572265625,9.0611572265625,9.0611572265625,9.0611572265625,9.0611572265625,9.62789154052734,9.62789154052734,9.62789154052734,9.62789154052734,9.62789154052734,9.62789154052734,10.4646911621094,10.4646911621094,10.4646911621094,10.4646911621094,10.4646911621094,10.4646911621094,11.0394134521484,11.0394134521484,11.0394134521484,11.0394134521484,11.0394134521484,11.0394134521484,8.98101043701172,8.98101043701172,9.54054260253906,9.54054260253906,10.3964920043945,10.3964920043945,10.3964920043945,10.3964920043945,10.3964920043945,10.3964920043945,10.9774169921875,10.9774169921875,10.9774169921875,10.9774169921875,10.9774169921875,10.9774169921875,8.90972137451172,8.90972137451172,8.90972137451172,8.90972137451172,8.90972137451172,8.90972137451172,9.46855926513672,9.46855926513672,10.31298828125,10.31298828125,10.8777389526367,10.8777389526367,10.8777389526367,10.8777389526367,10.8777389526367,10.8777389526367,8.80378723144531,8.80378723144531,8.80378723144531,8.80378723144531,8.80378723144531,8.80378723144531,9.35771942138672,9.35771942138672,10.2090148925781,10.2090148925781,10.2090148925781,10.2090148925781,10.2090148925781,10.2090148925781,10.7776641845703,10.7776641845703,10.7776641845703,10.7776641845703,10.7776641845703,10.7776641845703,8.72016906738281,8.72016906738281,8.72016906738281,8.72016906738281,8.72016906738281,8.72016906738281,9.27633666992188,9.27633666992188,10.1098327636719,10.1098327636719,10.1098327636719,10.1098327636719,10.1098327636719,10.1098327636719,10.689094543457,10.689094543457,8.64600372314453,8.64600372314453,8.64600372314453,9.20686340332031,9.20686340332031,10.0457305908203,10.0457305908203,10.0457305908203,10.0457305908203,10.0457305908203,10.0457305908203,10.6126937866211,10.6126937866211,11.3080139160156,11.3080139160156,11.3080139160156,11.3080139160156,11.3080139160156,11.3080139160156,11.3080139160156,9.12294006347656,9.12294006347656,9.95689392089844,9.95689392089844,9.95689392089844,9.95689392089844,9.95689392089844,9.95689392089844,10.5332717895508,10.5332717895508,11.3348159790039,11.3348159790039,11.3348159790039,11.3348159790039,11.3348159790039,11.3348159790039,11.3348159790039,9.01430511474609,9.01430511474609,9.01430511474609,9.01430511474609,9.01430511474609,9.01430511474609,9.89958190917969,9.89958190917969,9.89958190917969,9.89958190917969,9.89958190917969,9.89958190917969,10.5035552978516,10.5035552978516,11.305046081543,11.305046081543,11.305046081543,11.305046081543,11.305046081543,11.305046081543,11.305046081543,8.58487701416016,8.58487701416016,8.58487701416016,8.58487701416016,8.58487701416016,8.58487701416016,8.58487701416016,9.31057739257812,9.31057739257812,9.83441162109375,9.83441162109375,10.6477966308594,10.6477966308594,10.6477966308594,10.6477966308594,10.6477966308594,10.6477966308594,11.1442642211914,11.1442642211914,9.09437561035156,9.09437561035156,9.09437561035156,9.09437561035156,9.09437561035156,9.09437561035156,9.67483520507812,9.67483520507812,10.5409240722656,10.5409240722656,11.1255340576172,11.1255340576172,11.1255340576172,11.1255340576172,11.1255340576172,11.1255340576172,9.13027954101562,9.13027954101562,9.13027954101562,9.13027954101562,9.13027954101562,9.13027954101562,9.71150207519531,9.71150207519531,10.5898284912109,10.5898284912109,10.5898284912109,10.5898284912109,10.5898284912109,10.5898284912109,11.1887130737305,11.1887130737305,9.132568359375,9.132568359375,9.132568359375,9.132568359375,9.132568359375,9.132568359375,9.71158599853516,9.71158599853516,10.5948638916016,10.5948638916016,11.1997985839844,11.1997985839844,9.16797637939453,9.16797637939453,9.73070526123047,9.73070526123047,9.73070526123047,9.73070526123047,9.73070526123047,9.73070526123047,10.5979919433594,10.5979919433594,10.5979919433594,10.5979919433594,10.5979919433594,10.5979919433594,11.1729202270508,11.1729202270508,9.13526916503906,9.13526916503906,9.68666839599609,9.68666839599609,10.5318832397461,10.5318832397461,11.0946273803711,11.0946273803711,9.06742095947266,9.06742095947266,9.64504241943359,9.64504241943359,9.64504241943359,9.64504241943359,9.64504241943359,9.64504241943359,10.545051574707,10.545051574707,11.1141815185547,11.1141815185547,11.1141815185547,11.1141815185547,11.1141815185547,11.1141815185547,9.07952117919922,9.07952117919922,9.07952117919922,9.07952117919922,9.07952117919922,9.07952117919922,9.65452575683594,9.65452575683594,10.5185317993164,10.5185317993164,11.088752746582,11.088752746582,9.04623413085938,9.04623413085938,9.04623413085938,9.04623413085938,9.04623413085938,9.04623413085938,9.67018127441406,9.67018127441406,9.67018127441406,9.67018127441406,9.67018127441406,9.67018127441406,10.5653686523438,10.5653686523438,11.1098861694336,11.1098861694336,11.1098861694336,11.1098861694336,11.1098861694336,11.1098861694336,9.05475616455078,9.05475616455078,9.58840942382812,9.58840942382812,9.58840942382812,9.58840942382812,9.58840942382812,9.58840942382812,10.4842681884766,10.4842681884766,11.0274276733398,11.0274276733398,11.0274276733398,11.0274276733398,11.0274276733398,11.0274276733398,9.03057098388672,9.03057098388672,9.03057098388672,9.03057098388672,9.03057098388672,9.03057098388672,9.61869812011719,9.61869812011719,9.61869812011719,9.61869812011719,9.61869812011719,9.61869812011719,10.4664154052734,10.4664154052734,10.4664154052734,10.4664154052734,10.4664154052734,10.4664154052734,11.0157318115234,11.0157318115234,11.0157318115234,11.0157318115234,11.0157318115234,11.0157318115234,8.99583435058594,8.99583435058594,8.99583435058594,8.99583435058594,8.99583435058594,8.99583435058594,9.57252502441406,9.57252502441406,10.4535675048828,10.4535675048828,10.4535675048828,11.0234527587891,11.0234527587891,8.97805786132812,8.97805786132812,9.54222869873047,9.54222869873047,9.54222869873047,9.54222869873047,9.54222869873047,9.54222869873047,10.3950500488281,10.3950500488281,10.3950500488281,10.3950500488281,10.3950500488281,10.3950500488281,10.9433746337891,10.9433746337891,10.9433746337891,10.9433746337891,10.9433746337891,10.9433746337891,8.90812683105469,8.90812683105469,8.90812683105469,8.90812683105469,8.90812683105469,8.90812683105469,9.47808837890625,9.47808837890625,9.47808837890625,9.47808837890625,9.47808837890625,9.47808837890625,10.3252487182617,10.3252487182617,10.3252487182617,10.3252487182617,10.3252487182617,10.3252487182617,10.9116821289062,10.9116821289062,8.89324951171875,8.89324951171875,8.89324951171875,8.89324951171875,8.89324951171875,8.89324951171875,9.43959045410156,9.43959045410156,10.3043212890625,10.3043212890625,10.8729629516602,10.8729629516602,10.8729629516602,10.8729629516602,10.8729629516602,10.8729629516602,8.8465576171875,8.8465576171875,8.8465576171875,8.8465576171875,8.8465576171875,8.8465576171875,9.39011383056641,9.39011383056641,9.39011383056641,9.39011383056641,9.39011383056641,9.39011383056641,10.262580871582,10.262580871582,10.262580871582,10.262580871582,10.262580871582,10.262580871582,10.8557815551758,10.8557815551758,10.8557815551758,10.8557815551758,10.8557815551758,10.8557815551758,8.7947998046875,8.7947998046875,9.34109497070312,9.34109497070312,10.1772003173828,10.1772003173828,10.7581329345703,10.7581329345703,10.7581329345703,10.7581329345703,10.7581329345703,10.7581329345703,8.73011016845703,8.73011016845703,9.29310607910156,9.29310607910156,10.1456451416016,10.1456451416016,10.7145309448242,10.7145309448242,11.3918991088867,11.3918991088867,11.3918991088867,11.3918991088867,11.3918991088867,11.3918991088867,11.3918991088867,9.25566864013672,9.25566864013672,9.25566864013672,9.25566864013672,9.25566864013672,9.25566864013672,10.1151504516602,10.1151504516602,10.1151504516602,10.1151504516602,10.1151504516602,10.1151504516602,10.6828689575195,10.6828689575195,11.4189300537109,11.4189300537109,11.4189300537109,11.4189300537109,11.4189300537109,11.4189300537109,11.4189300537109,9.19232177734375,9.19232177734375,9.19232177734375,9.19232177734375,9.19232177734375,9.19232177734375,10.0408172607422,10.0408172607422,10.0408172607422,10.0408172607422,10.0408172607422,10.0408172607422,10.6020278930664,10.6020278930664,10.6020278930664,10.6020278930664,10.6020278930664,10.6020278930664,11.4130325317383,11.4130325317383,11.4130325317383,11.4130325317383,11.4130325317383,11.4130325317383,11.4130325317383,9.11878204345703,9.11878204345703,9.11878204345703,9.11878204345703,9.11878204345703,9.11878204345703,9.97122955322266,9.97122955322266,9.97122955322266,9.97122955322266,9.97122955322266,9.97122955322266,10.53515625,10.53515625,10.53515625,10.53515625,10.53515625,10.53515625,11.3758163452148,11.3758163452148,8.91493988037109,8.91493988037109,8.91493988037109,8.91493988037109,8.91493988037109,8.91493988037109,9.74908447265625,9.74908447265625,9.74908447265625,9.74908447265625,9.74908447265625,9.74908447265625,10.3173599243164,10.3173599243164,10.3173599243164,10.3173599243164,10.3173599243164,10.3173599243164,11.1633605957031,11.1633605957031,11.1633605957031,11.1633605957031,11.1633605957031,11.1633605957031,8.8221435546875,8.8221435546875,8.8221435546875,8.8221435546875,8.8221435546875,8.8221435546875,9.66843414306641,9.66843414306641,10.2393035888672,10.2393035888672,10.2393035888672,10.2393035888672,10.2393035888672,10.2393035888672,11.100830078125,11.100830078125,11.100830078125,11.100830078125,11.100830078125,11.100830078125,8.824462890625,8.824462890625,8.824462890625,8.824462890625,8.824462890625,8.824462890625,9.70288848876953,9.70288848876953,9.70288848876953,9.70288848876953,9.70288848876953,9.70288848876953,10.2891464233398,10.2891464233398,10.2891464233398,10.2891464233398,10.2891464233398,10.2891464233398,11.1377487182617,11.1377487182617,11.1377487182617,11.1377487182617,11.1377487182617,11.1377487182617,8.78414154052734,8.78414154052734,8.78414154052734,8.78414154052734,8.78414154052734,8.78414154052734,9.60081481933594,9.60081481933594,10.1689758300781,10.1689758300781,11.0491027832031,11.0491027832031,11.0491027832031,11.0491027832031,11.0491027832031,11.0491027832031,8.7393798828125,8.7393798828125,9.57299041748047,9.57299041748047,9.57299041748047,9.57299041748047,9.57299041748047,9.57299041748047,10.1576843261719,10.1576843261719,11.0357666015625,11.0357666015625,11.0357666015625,11.0357666015625,11.0357666015625,11.0357666015625,8.71472930908203,8.71472930908203,9.55513763427734,9.55513763427734,9.55513763427734,9.55513763427734,9.55513763427734,9.55513763427734,10.1312026977539,10.1312026977539,10.1312026977539,10.1312026977539,10.1312026977539,10.1312026977539,10.9768981933594,10.9768981933594,10.9768981933594,10.9768981933594,10.9768981933594,10.9768981933594,11.3465423583984,11.3465423583984,11.3465423583984,11.3465423583984,11.3465423583984,11.3465423583984,11.3465423583984,9.46170043945312,9.46170043945312,9.46170043945312,9.46170043945312,9.46170043945312,9.46170043945312],"meminc":[0,0,0.607620239257812,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.559066772460938,0,0,0,0,0,0.347732543945312,0,0,0,0,0,0.52032470703125,0,0.34912109375,0,0.53253173828125,0,0.289962768554688,0,0,0,0,0,0,-5.47884368896484,0,0,0,0,0,0.599510192871094,0,0.901290893554688,0,0,0,0,0,0.574737548828125,0,-2.08145141601562,0,0,0,0,0,0.571067810058594,0,0,0,0,0,0.869667053222656,0,0,0,0,0,0.593696594238281,0,-2.07427215576172,0,0.561264038085938,0,0,0,0,0,0.879638671875,0,0,0,0,0,0.574790954589844,0,0,0,0,0,-2.07460784912109,0,0,0,0,0,0.566734313964844,0,0,0,0,0,0.836799621582031,0,0,0,0,0,0.574722290039062,0,0,0,0,0,-2.05840301513672,0,0.559532165527344,0,0.855949401855469,0,0,0,0,0,0.580924987792969,0,0,0,0,0,-2.06769561767578,0,0,0,0,0,0.558837890625,0,0.844429016113281,0,0.564750671386719,0,0,0,0,0,-2.07395172119141,0,0,0,0,0,0.553932189941406,0,0.851295471191406,0,0,0,0,0,0.568649291992188,0,0,0,0,0,-2.0574951171875,0,0,0,0,0,0.556167602539062,0,0.83349609375,0,0,0,0,0,0.579261779785156,0,-2.0430908203125,0,0,0.560859680175781,0,0.8388671875,0,0,0,0,0,0.566963195800781,0,0.695320129394531,0,0,0,0,0,0,-2.18507385253906,0,0.833953857421875,0,0,0,0,0,0.576377868652344,0,0.801544189453125,0,0,0,0,0,0,-2.32051086425781,0,0,0,0,0,0.885276794433594,0,0,0,0,0,0.603973388671875,0,0.801490783691406,0,0,0,0,0,0,-2.72016906738281,0,0,0,0,0,0,0.725700378417969,0,0.523834228515625,0,0.813385009765625,0,0,0,0,0,0.496467590332031,0,-2.04988861083984,0,0,0,0,0,0.580459594726562,0,0.8660888671875,0,0.584609985351562,0,0,0,0,0,-1.99525451660156,0,0,0,0,0,0.581222534179688,0,0.878326416015625,0,0,0,0,0,0.598884582519531,0,-2.05614471435547,0,0,0,0,0,0.579017639160156,0,0.883277893066406,0,0.604934692382812,0,-2.03182220458984,0,0.562728881835938,0,0,0,0,0,0.867286682128906,0,0,0,0,0,0.574928283691406,0,-2.03765106201172,0,0.551399230957031,0,0.84521484375,0,0.562744140625,0,-2.02720642089844,0,0.577621459960938,0,0,0,0,0,0.900009155273438,0,0.569129943847656,0,0,0,0,0,-2.03466033935547,0,0,0,0,0,0.575004577636719,0,0.864006042480469,0,0.570220947265625,0,-2.04251861572266,0,0,0,0,0,0.623947143554688,0,0,0,0,0,0.895187377929688,0,0.544517517089844,0,0,0,0,0,-2.05513000488281,0,0.533653259277344,0,0,0,0,0,0.895858764648438,0,0.543159484863281,0,0,0,0,0,-1.99685668945312,0,0,0,0,0,0.588127136230469,0,0,0,0,0,0.84771728515625,0,0,0,0,0,0.54931640625,0,0,0,0,0,-2.0198974609375,0,0,0,0,0,0.576690673828125,0,0.88104248046875,0,0,0.56988525390625,0,-2.04539489746094,0,0.564170837402344,0,0,0,0,0,0.852821350097656,0,0,0,0,0,0.548324584960938,0,0,0,0,0,-2.03524780273438,0,0,0,0,0,0.569961547851562,0,0,0,0,0,0.847160339355469,0,0,0,0,0,0.586433410644531,0,-2.0184326171875,0,0,0,0,0,0.546340942382812,0,0.864730834960938,0,0.568641662597656,0,0,0,0,0,-2.02640533447266,0,0,0,0,0,0.543556213378906,0,0,0,0,0,0.872467041015625,0,0,0,0,0,0.59320068359375,0,0,0,0,0,-2.06098175048828,0,0.546295166015625,0,0.836105346679688,0,0.5809326171875,0,0,0,0,0,-2.02802276611328,0,0.562995910644531,0,0.8525390625,0,0.568885803222656,0,0.6773681640625,0,0,0,0,0,0,-2.13623046875,0,0,0,0,0,0.859481811523438,0,0,0,0,0,0.567718505859375,0,0.736061096191406,0,0,0,0,0,0,-2.22660827636719,0,0,0,0,0,0.848495483398438,0,0,0,0,0,0.561210632324219,0,0,0,0,0,0.811004638671875,0,0,0,0,0,0,-2.29425048828125,0,0,0,0,0,0.852447509765625,0,0,0,0,0,0.563926696777344,0,0,0,0,0,0.840660095214844,0,-2.46087646484375,0,0,0,0,0,0.834144592285156,0,0,0,0,0,0.568275451660156,0,0,0,0,0,0.846000671386719,0,0,0,0,0,-2.34121704101562,0,0,0,0,0,0.846290588378906,0,0.570869445800781,0,0,0,0,0,0.861526489257812,0,0,0,0,0,-2.2763671875,0,0,0,0,0,0.878425598144531,0,0,0,0,0,0.586257934570312,0,0,0,0,0,0.848602294921875,0,0,0,0,0,-2.35360717773438,0,0,0,0,0,0.816673278808594,0,0.568161010742188,0,0.880126953125,0,0,0,0,0,-2.30972290039062,0,0.833610534667969,0,0,0,0,0,0.584693908691406,0,0.878082275390625,0,0,0,0,0,-2.32103729248047,0,0.840408325195312,0,0,0,0,0,0.576065063476562,0,0,0,0,0,0.845695495605469,0,0,0,0,0,0.369644165039062,0,0,0,0,0,0,-1.88484191894531,0,0,0,0,0],"filename":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R","generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,"generate-primes-1.R",null,null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R","generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null]},"interval":10,"files":[{"filename":"generate-primes-1.R","content":"generate.primes.upto.1 <- function(N) {\n  primes <- 2\n  for (i in 3:N) {\n    found.divisor <- FALSE\n    for (j in primes) {\n      if (i %% j == 0) {\n        found.divisor <- TRUE\n      }\n    }\n    if (!found.divisor) primes <- c(primes,i)\n  }\n  return(primes)\n}\n","normpath":"/home/runner/work/sc1/sc1/content/profile-debug/generate-primes-1.R"}],"prof_output":"/tmp/Rtmpa5YXYU/fileeea28d689e7.prof","highlight":{"output":["^output\\$"],"gc":["^<GC>$"],"stacktrace":["^\\.\\.stacktraceo(n|ff)\\.\\.$"]},"split":"h"}},"evals":[],"jsHooks":[]}</script>
<p>We see from the <code>profvis</code> results that most of the time is spent in line 6 performing the integer modulus operation. If we look at the code more closely, we can see that it is possible to eliminate some of these operations by breaking the loop over primes as soon as one divisor is found.</p>
<pre class="r"><code>source(&quot;generate-primes-2.R&quot;, keep.source=TRUE)
profvis(generate.primes.upto.2(10000))</code></pre>
<div class="profvis html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-2" style="width:100%;height:600px;"></div>
<script type="application/json" data-for="htmlwidget-2">{"x":{"message":{"prof":{"time":[1,1,2,2,3,3,4,4,5,5,5,5,5,5,6,6,7,7,8,8,8,8,8,8,8,9,9,10,10,10,10,10,10,11,11,11,11,11,11,12,12,12,12,12,12,12,13,13,14,14,14,14,14,14,15,15,15,15,15,15,16,16,16,16,16,16,17,17,17,18,18,18,18,18,18,19,19,19,19,19,19,20,20],"depth":[2,1,2,1,2,1,2,1,6,5,4,3,2,1,2,1,2,1,7,6,5,4,3,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,7,6,5,4,3,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1],"label":["%%","local","%%","local","%%","local","%%","local","if (i %% j == 0) {","generate.primes.upto.2","eval","eval","eval.parent","local","%%","local","%%","local","<GC>","if (i %% j == 0) {","generate.primes.upto.2","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.2","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.2","eval","eval","eval.parent","local","<GC>","if (i %% j == 0) {","generate.primes.upto.2","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.2","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.2","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.2","eval","eval","eval.parent","local","if (i %% j == 0) {","%%","local","if (i %% j == 0) {","generate.primes.upto.2","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.2","eval","eval","eval.parent","local","%%","local"],"filenum":[1,null,1,null,1,null,1,null,1,null,null,null,null,null,1,null,1,null,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null],"linenum":[6,null,6,null,6,null,6,null,6,null,null,null,null,null,6,null,6,null,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,6,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null],"memalloc":[10.1231918334961,10.1231918334961,10.9196548461914,10.9196548461914,12.0216751098633,12.0216751098633,12.7454071044922,12.7454071044922,10.2678146362305,10.2678146362305,10.2678146362305,10.2678146362305,10.2678146362305,10.2678146362305,11.0740432739258,11.0740432739258,12.26416015625,12.26416015625,12.9272689819336,12.9272689819336,12.9272689819336,12.9272689819336,12.9272689819336,12.9272689819336,12.9272689819336,10.3901748657227,10.3901748657227,11.1641082763672,11.1641082763672,11.1641082763672,11.1641082763672,11.1641082763672,11.1641082763672,12.3818054199219,12.3818054199219,12.3818054199219,12.3818054199219,12.3818054199219,12.3818054199219,12.927978515625,12.927978515625,12.927978515625,12.927978515625,12.927978515625,12.927978515625,12.927978515625,10.5836029052734,10.5836029052734,11.371223449707,11.371223449707,11.371223449707,11.371223449707,11.371223449707,11.371223449707,12.5478973388672,12.5478973388672,12.5478973388672,12.5478973388672,12.5478973388672,12.5478973388672,9.51042175292969,9.51042175292969,9.51042175292969,9.51042175292969,9.51042175292969,9.51042175292969,10.6973495483398,10.6973495483398,10.6973495483398,11.5251083374023,11.5251083374023,11.5251083374023,11.5251083374023,11.5251083374023,11.5251083374023,12.7980575561523,12.7980575561523,12.7980575561523,12.7980575561523,12.7980575561523,12.7980575561523,9.73472595214844,9.73472595214844],"meminc":[0,0,0.796463012695312,0,1.10202026367188,0,0.723731994628906,0,-2.47759246826172,0,0,0,0,0,0.806228637695312,0,1.19011688232422,0,0.663108825683594,0,0,0,0,0,0,-2.53709411621094,0,0.773933410644531,0,0,0,0,0,1.21769714355469,0,0,0,0,0,0.546173095703125,0,0,0,0,0,0,-2.34437561035156,0,0.787620544433594,0,0,0,0,0,1.17667388916016,0,0,0,0,0,-3.0374755859375,0,0,0,0,0,1.18692779541016,0,0,0.8277587890625,0,0,0,0,0,1.27294921875,0,0,0,0,0,-3.06333160400391,0],"filename":["generate-primes-2.R",null,"generate-primes-2.R",null,"generate-primes-2.R",null,"generate-primes-2.R",null,"generate-primes-2.R",null,null,null,null,null,"generate-primes-2.R",null,"generate-primes-2.R",null,null,"generate-primes-2.R",null,null,null,null,null,"generate-primes-2.R",null,"generate-primes-2.R",null,null,null,null,null,"generate-primes-2.R",null,null,null,null,null,null,"generate-primes-2.R",null,null,null,null,null,"generate-primes-2.R",null,"generate-primes-2.R",null,null,null,null,null,"generate-primes-2.R",null,null,null,null,null,"generate-primes-2.R",null,null,null,null,null,"generate-primes-2.R","generate-primes-2.R",null,"generate-primes-2.R",null,null,null,null,null,"generate-primes-2.R",null,null,null,null,null,"generate-primes-2.R",null]},"interval":10,"files":[{"filename":"generate-primes-2.R","content":"generate.primes.upto.2 <- function(N) {\n  primes <- 2\n  for (i in 3:N) {\n    found.divisor <- FALSE\n    for (j in primes) {\n      if (i %% j == 0) {\n        found.divisor <- TRUE\n        break\n      }\n    }\n    if (!found.divisor) primes <- c(primes,i)\n  }\n  return(primes)\n}\n","normpath":"/home/runner/work/sc1/sc1/content/profile-debug/generate-primes-2.R"}],"prof_output":"/tmp/Rtmpa5YXYU/fileeea2329f6bdd.prof","highlight":{"output":["^output\\$"],"gc":["^<GC>$"],"stacktrace":["^\\.\\.stacktraceo(n|ff)\\.\\.$"]},"split":"h"}},"evals":[],"jsHooks":[]}</script>
<p>This has dramatically reduced the running time of the algorithm, by a factor of about 10. Although the function is fairly short, we may feel that the code is not easy to read. In particular, the overall idea of the algorithm can be lost in the implementation details. So we can consider the same algorithm, but where we call a helper function called <code>any.divisors</code> instead.</p>
<pre class="r"><code>source(&quot;generate-primes-3.R&quot;, keep.source=TRUE)
profvis(generate.primes.upto.3(10000))</code></pre>
<div class="profvis html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-3" style="width:100%;height:600px;"></div>
<script type="application/json" data-for="htmlwidget-3">{"x":{"message":{"prof":{"time":[1,1,1,1,1,1,1,2,2,3,3,3,3,3,3,3,4,4,5,5,6,6,7,7,8,8,9,9,9,10,10,11,11,12,12,12,12,12,12,12,13,13,13,13,13,13,13,14,14,15,15,15,15,15,15,15,16,16,17,17,18,18,18,18,18,18,18,19,19,19,19,19,19,19],"depth":[7,6,5,4,3,2,1,2,1,7,6,5,4,3,2,1,2,1,2,1,2,1,2,1,2,1,3,2,1,2,1,2,1,7,6,5,4,3,2,1,7,6,5,4,3,2,1,2,1,7,6,5,4,3,2,1,2,1,2,1,7,6,5,4,3,2,1,7,6,5,4,3,2,1],"label":["if (i %% j == 0) {","any.divisors","generate.primes.upto.3","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","any.divisors","generate.primes.upto.3","eval","eval","eval.parent","local","%%","local","%%","local","%%","local","%%","local","%%","local","if (i %% j == 0) {","%%","local","%%","local","%%","local","if (i %% j == 0) {","any.divisors","generate.primes.upto.3","eval","eval","eval.parent","local","if (i %% j == 0) {","any.divisors","generate.primes.upto.3","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","any.divisors","generate.primes.upto.3","eval","eval","eval.parent","local","%%","local","%%","local","if (i %% j == 0) {","any.divisors","generate.primes.upto.3","eval","eval","eval.parent","local","if (i %% j == 0) {","any.divisors","generate.primes.upto.3","eval","eval","eval.parent","local"],"filenum":[1,1,null,null,null,null,null,1,null,1,1,null,null,null,null,null,1,null,1,null,1,null,1,null,1,null,1,1,null,1,null,1,null,1,1,null,null,null,null,null,1,1,null,null,null,null,null,1,null,1,1,null,null,null,null,null,1,null,1,null,1,1,null,null,null,null,null,1,1,null,null,null,null,null],"linenum":[3,13,null,null,null,null,null,3,null,3,13,null,null,null,null,null,3,null,3,null,3,null,3,null,3,null,3,3,null,3,null,3,null,3,13,null,null,null,null,null,3,13,null,null,null,null,null,3,null,3,13,null,null,null,null,null,3,null,3,null,3,13,null,null,null,null,null,3,13,null,null,null,null,null],"memalloc":[9.97243499755859,9.97243499755859,9.97243499755859,9.97243499755859,9.97243499755859,9.97243499755859,9.97243499755859,10.5160598754883,10.5160598754883,11.3322296142578,11.3322296142578,11.3322296142578,11.3322296142578,11.3322296142578,11.3322296142578,11.3322296142578,11.8809509277344,11.8809509277344,9.60392761230469,9.60392761230469,10.1571655273438,10.1571655273438,10.9848327636719,10.9848327636719,11.5411682128906,11.5411682128906,12.3677215576172,12.3677215576172,12.3677215576172,9.6541748046875,9.6541748046875,10.4941253662109,10.4941253662109,11.0493392944336,11.0493392944336,11.0493392944336,11.0493392944336,11.0493392944336,11.0493392944336,11.0493392944336,11.8852920532227,11.8852920532227,11.8852920532227,11.8852920532227,11.8852920532227,11.8852920532227,11.8852920532227,12.4379501342773,12.4379501342773,9.98915863037109,9.98915863037109,9.98915863037109,9.98915863037109,9.98915863037109,9.98915863037109,9.98915863037109,10.5517654418945,10.5517654418945,11.3948745727539,11.3948745727539,11.9686737060547,11.9686737060547,11.9686737060547,11.9686737060547,11.9686737060547,11.9686737060547,11.9686737060547,9.52284240722656,9.52284240722656,9.52284240722656,9.52284240722656,9.52284240722656,9.52284240722656,9.52284240722656],"meminc":[0,0,0,0,0,0,0,0.543624877929688,0,0.816169738769531,0,0,0,0,0,0,0.548721313476562,0,-2.27702331542969,0,0.553237915039062,0,0.827667236328125,0,0.55633544921875,0,0.826553344726562,0,0,-2.71354675292969,0,0.839950561523438,0,0.555213928222656,0,0,0,0,0,0,0.835952758789062,0,0,0,0,0,0,0.552658081054688,0,-2.44879150390625,0,0,0,0,0,0,0.562606811523438,0,0.843109130859375,0,0.573799133300781,0,0,0,0,0,0,-2.44583129882812,0,0,0,0,0,0],"filename":["generate-primes-3.R","generate-primes-3.R",null,null,null,null,null,"generate-primes-3.R",null,"generate-primes-3.R","generate-primes-3.R",null,null,null,null,null,"generate-primes-3.R",null,"generate-primes-3.R",null,"generate-primes-3.R",null,"generate-primes-3.R",null,"generate-primes-3.R",null,"generate-primes-3.R","generate-primes-3.R",null,"generate-primes-3.R",null,"generate-primes-3.R",null,"generate-primes-3.R","generate-primes-3.R",null,null,null,null,null,"generate-primes-3.R","generate-primes-3.R",null,null,null,null,null,"generate-primes-3.R",null,"generate-primes-3.R","generate-primes-3.R",null,null,null,null,null,"generate-primes-3.R",null,"generate-primes-3.R",null,"generate-primes-3.R","generate-primes-3.R",null,null,null,null,null,"generate-primes-3.R","generate-primes-3.R",null,null,null,null,null]},"interval":10,"files":[{"filename":"generate-primes-3.R","content":"any.divisors <- function(i, ps) {\n  for (j in ps) {\n    if (i %% j == 0) {\n      return(TRUE)\n    }\n  }\n  return(FALSE)\n}\n\ngenerate.primes.upto.3 <- function(N) {\n  primes <- 2\n  for (i in 3:N) {\n    if (!any.divisors(i, primes)) {\n      primes <- c(primes,i)\n    }\n  }\n  return(primes)\n}\n","normpath":"/home/runner/work/sc1/sc1/content/profile-debug/generate-primes-3.R"}],"prof_output":"/tmp/Rtmpa5YXYU/fileeea28ac224b.prof","highlight":{"output":["^output\\$"],"gc":["^<GC>$"],"stacktrace":["^\\.\\.stacktraceo(n|ff)\\.\\.$"]},"split":"h"}},"evals":[],"jsHooks":[]}</script>
<p>It seems reasonable to say that the third version of the algorithm is easier to understand. Moreover, there is little to no performance penalty.</p>
</div>
<div id="the-sieve-of-eratosthenes" class="section level2">
<h2>The Sieve of Eratosthenes</h2>
<p>A more computationally efficient approach is the <a href="https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes">Sieve of Eratosthenes</a>. In this approach, one does not check whether each number is prime by checking divisors. Instead, one starts with a list of numbers from <span class="math inline">\(1\)</span> to <span class="math inline">\(N\)</span> and successively marks all multiples of each prime, in order, as composite. To identify the next prime after <span class="math inline">\(2\)</span> for marking multiples, one simply needs to find the next number not marked composite.</p>
<p>This approach is so much faster, that we consider finding all primes up to <span class="math inline">\(1000000\)</span> instead of up to <span class="math inline">\(10000\)</span>.</p>
<pre class="r"><code>source(&quot;sieve-1.R&quot;, keep.source=TRUE)
profvis(sieve.1(1000000))</code></pre>
<div class="profvis html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-4" style="width:100%;height:600px;"></div>
<script type="application/json" data-for="htmlwidget-4">{"x":{"message":{"prof":{"time":[1,1,1,1,1,1,2,2,2,2,2,2,3,3,3,3,3,3,4,4,4,4,4,4,5,5,5,5,5,5,6,6,6,6,6,6,7,7,7,7,7,7,8,8,8,8,8,8,9,9,9,9,9,9,10,10,10,10,10,10,11,11,11,11,11,11,12,12,12,12,12,12,13,13,13,13,13,13,14,14,14,14,14,14,15,15,15,15,15,15,16,16,16,16,16,16,17,17,17,17,17,17,18,18,18,18,18,18,19,19,19,19,19,19,20,20,20,20,20,20,21,21,21,21,21,21,22,22,22,22,22,22,23,23,23,23,23,23,24,24,24,24,24,24,25,25,25,25,25,25,26,26,26,26,26,26,27,27,27,27,27,27,28,28,28,28,28,28,29,29,29,29,29,29,30,30,30,30,30,30,31,31,31,31,31,31,32,32,32,32,32,32,33,33,33,33,33,33],"depth":[6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1],"label":["s <- s + i","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","s <- s + i","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","while (s <= N) {","sieve.1","eval","eval","eval.parent","local","while (s <= N) {","sieve.1","eval","eval","eval.parent","local","while (s <= N) {","sieve.1","eval","eval","eval.parent","local","while (s <= N) {","sieve.1","eval","eval","eval.parent","local","while (s <= N) {","sieve.1","eval","eval","eval.parent","local","while (s <= N) {","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","s <- s + i","sieve.1","eval","eval","eval.parent","local","while (s <= N) {","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","s <- s + i","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","while (s <= N) {","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","s <- s + i","sieve.1","eval","eval","eval.parent","local","while (s <= N) {","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","while (s <= N) {","sieve.1","eval","eval","eval.parent","local","if (candidates[i]) {","sieve.1","eval","eval","eval.parent","local","if (candidates[i]) {","sieve.1","eval","eval","eval.parent","local","if (candidates[i]) {","sieve.1","eval","eval","eval.parent","local","if (candidates[i]) {","sieve.1","eval","eval","eval.parent","local","if (candidates[i]) {","sieve.1","eval","eval","eval.parent","local","return((1:N)[candidates])","sieve.1","eval","eval","eval.parent","local"],"filenum":[1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null],"linenum":[10,null,null,null,null,null,9,null,null,null,null,null,9,null,null,null,null,null,9,null,null,null,null,null,10,null,null,null,null,null,9,null,null,null,null,null,9,null,null,null,null,null,9,null,null,null,null,null,8,null,null,null,null,null,8,null,null,null,null,null,8,null,null,null,null,null,8,null,null,null,null,null,8,null,null,null,null,null,8,null,null,null,null,null,9,null,null,null,null,null,10,null,null,null,null,null,8,null,null,null,null,null,9,null,null,null,null,null,10,null,null,null,null,null,9,null,null,null,null,null,8,null,null,null,null,null,9,null,null,null,null,null,9,null,null,null,null,null,10,null,null,null,null,null,8,null,null,null,null,null,9,null,null,null,null,null,8,null,null,null,null,null,5,null,null,null,null,null,5,null,null,null,null,null,5,null,null,null,null,null,5,null,null,null,null,null,5,null,null,null,null,null,14,null,null,null,null,null],"memalloc":[13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,13.4899749755859,17.3047180175781,17.3047180175781,17.3047180175781,17.3047180175781,17.3047180175781,17.3047180175781],"meminc":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.81474304199219,0,0,0,0,0],"filename":["sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null]},"interval":10,"files":[{"filename":"sieve-1.R","content":"sieve.1 <- function(N) {\n  candidates <- rep(TRUE,N)\n  candidates[1] <- FALSE\n  for (i in 2:N) {\n    if (candidates[i]) {\n      # i is prime\n      s <- i*2\n      while (s <= N) {\n        candidates[s] <- FALSE\n        s <- s + i\n      }\n    }\n  }\n  return((1:N)[candidates])\n}\n","normpath":"/home/runner/work/sc1/sc1/content/profile-debug/sieve-1.R"}],"prof_output":"/tmp/Rtmpa5YXYU/fileeea22a332e20.prof","highlight":{"output":["^output\\$"],"gc":["^<GC>$"],"stacktrace":["^\\.\\.stacktraceo(n|ff)\\.\\.$"]},"split":"h"}},"evals":[],"jsHooks":[]}</script>
<p>We see that most of the time is spent in lines 8–10, which correspond to marking <code>s</code> as composite and incrementing <code>s</code> by the current prime. We can remove some of these computations by noticing that if <span class="math inline">\(i\)</span> is prime then all multiples <span class="math inline">\(2i,3i,\ldots,(i-1)i\)</span> will already have been marked as composite. It follows that one can also stop “sieving” as soon as <span class="math inline">\(i &gt; \sqrt{N}\)</span>.</p>
<pre class="r"><code>source(&quot;sieve-2.R&quot;, keep.source=TRUE)
profvis(sieve.2(1000000))</code></pre>
<div class="profvis html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-5" style="width:100%;height:600px;"></div>
<script type="application/json" data-for="htmlwidget-5">{"x":{"message":{"prof":{"time":[1,1,1,1,1,1,2,2,2,2,2,2,3,3,3,3,3,3,4,4,4,4,4,4,5,5,5,5,5,5,6,6,6,6,6,6,7,7,7,7,7,7,8,8,8,8,8,8,9,9,9,9,9,9,10,10,10,10,10,10,11,11,11,11,11,11,12,12,12,12,12,12,13,13,13,13,13,13,14,14,14,14,14,14,15,15,15,15,15,15,16,16,16,16,16,16,17,17,17,17,17,17,18,18,18,18,18,18,19,19,19,19,19,19,20,20,20,20,20,20],"depth":[6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1],"label":["s <- s + i","sieve.2","eval","eval","eval.parent","local","s <- s + i","sieve.2","eval","eval","eval.parent","local","s <- s + i","sieve.2","eval","eval","eval.parent","local","s <- s + i","sieve.2","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.2","eval","eval","eval.parent","local","while (s <= N) {","sieve.2","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.2","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.2","eval","eval","eval.parent","local","while (s <= N) {","sieve.2","eval","eval","eval.parent","local","while (s <= N) {","sieve.2","eval","eval","eval.parent","local","while (s <= N) {","sieve.2","eval","eval","eval.parent","local","while (s <= N) {","sieve.2","eval","eval","eval.parent","local","while (s <= N) {","sieve.2","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.2","eval","eval","eval.parent","local","while (s <= N) {","sieve.2","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.2","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.2","eval","eval","eval.parent","local","s <- s + i","sieve.2","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.2","eval","eval","eval.parent","local","s <- s + i","sieve.2","eval","eval","eval.parent","local"],"filenum":[1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null],"linenum":[11,null,null,null,null,null,11,null,null,null,null,null,11,null,null,null,null,null,11,null,null,null,null,null,10,null,null,null,null,null,9,null,null,null,null,null,10,null,null,null,null,null,10,null,null,null,null,null,9,null,null,null,null,null,9,null,null,null,null,null,9,null,null,null,null,null,9,null,null,null,null,null,9,null,null,null,null,null,10,null,null,null,null,null,9,null,null,null,null,null,10,null,null,null,null,null,10,null,null,null,null,null,11,null,null,null,null,null,10,null,null,null,null,null,11,null,null,null,null,null],"memalloc":[13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055,13.5068283081055],"meminc":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"filename":["sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null]},"interval":10,"files":[{"filename":"sieve-2.R","content":"sieve.2 <- function(N) {\n  candidates <- rep(TRUE,N)\n  candidates[1] <- FALSE\n  sqrt.N <- sqrt(N)\n  for (i in 2:sqrt.N) {\n    if (candidates[i]) {\n      # i is prime\n      s <- i*i\n      while (s <= N) {\n        candidates[s] <- FALSE\n        s <- s + i\n      }\n    }\n  }\n  return((1:N)[candidates])\n}\n","normpath":"/home/runner/work/sc1/sc1/content/profile-debug/sieve-2.R"}],"prof_output":"/tmp/Rtmpa5YXYU/fileeea213c52a18.prof","highlight":{"output":["^output\\$"],"gc":["^<GC>$"],"stacktrace":["^\\.\\.stacktraceo(n|ff)\\.\\.$"]},"split":"h"}},"evals":[],"jsHooks":[]}</script>
<p>There appears to be a moderate improvement in performance for this size of problem. We notice that a substantial amount of time is spent in the <code>while</code> loop, which mainly involves incrementing <code>s</code> and flagging the corresponding number as composite. We can vectorize this computation and separate it cleanly from the rest of the algorithm, as follows.</p>
<pre class="r"><code>source(&quot;sieve-3.R&quot;, keep.source=TRUE)
profvis(sieve.3(1000000))</code></pre>
<div class="profvis html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-6" style="width:100%;height:600px;"></div>
<script type="application/json" data-for="htmlwidget-6">{"x":{"message":{"prof":{"time":[1,1,2,2,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,5,5,5,5,5,5,5,6,6,7,7,7,7,7,7,7],"depth":[2,1,6,5,4,3,2,1,8,7,6,5,4,3,2,1,6,5,4,3,2,1,7,6,5,4,3,2,1,2,1,7,6,5,4,3,2,1],"label":["lazyLoadDBfetch","local","candidates[multiples] <- FALSE","sieve.3","eval","eval","eval.parent","local","pmin","seq.default","get.multiples","sieve.3","eval","eval","eval.parent","local","candidates[multiples] <- FALSE","sieve.3","eval","eval","eval.parent","local","seq.default","get.multiples","sieve.3","eval","eval","eval.parent","local","is.finite","local","<GC>","return((1:N)[candidates])","sieve.3","eval","eval","eval.parent","local"],"filenum":[null,null,1,null,null,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,null,1,null,null,null,null,null,null,null,null,1,null,null,null,null,null],"linenum":[null,null,15,null,null,null,null,null,null,null,14,null,null,null,null,null,15,null,null,null,null,null,null,14,null,null,null,null,null,null,null,null,18,null,null,null,null,null],"memalloc":[19.2630844116211,19.2630844116211,24.9897766113281,24.9897766113281,24.9897766113281,24.9897766113281,24.9897766113281,24.9897766113281,31.4641418457031,31.4641418457031,31.4641418457031,31.4641418457031,31.4641418457031,31.4641418457031,31.4641418457031,31.4641418457031,37.3136138916016,37.3136138916016,37.3136138916016,37.3136138916016,37.3136138916016,37.3136138916016,47.4737091064453,47.4737091064453,47.4737091064453,47.4737091064453,47.4737091064453,47.4737091064453,47.4737091064453,54.4204483032227,54.4204483032227,62.2924499511719,62.2924499511719,62.2924499511719,62.2924499511719,62.2924499511719,62.2924499511719,62.2924499511719],"meminc":[0,0,5.72669219970703,0,0,0,0,0,6.474365234375,0,0,0,0,0,0,0,5.84947204589844,0,0,0,0,0,10.1600952148438,0,0,0,0,0,0,6.94673919677734,0,7.87200164794922,0,0,0,0,0,0],"filename":[null,null,"sieve-3.R",null,null,null,null,null,null,null,"sieve-3.R",null,null,null,null,null,"sieve-3.R",null,null,null,null,null,null,"sieve-3.R",null,null,null,null,null,null,null,null,"sieve-3.R",null,null,null,null,null]},"interval":10,"files":[{"filename":"sieve-3.R","content":"get.multiples <- function(i, N) {\n  n <- floor(N/i) - i\n  if (n <= 0) return(NULL)\n  multiples <- seq(i*i,(i+n)*i,i)\n  return(multiples)\n}\n\nsieve.3 <- function(N) {\n  candidates <- rep(TRUE,N)\n  candidates[1] <- FALSE\n  sqrt.N <- sqrt(N)\n  for (i in 2:sqrt.N) {\n    if (candidates[i]) {\n      multiples <- get.multiples(i, N)\n      candidates[multiples] <- FALSE\n    }\n  }\n  return((1:N)[candidates])\n}\n","normpath":"/home/runner/work/sc1/sc1/content/profile-debug/sieve-3.R"}],"prof_output":"/tmp/Rtmpa5YXYU/fileeea26913b8be.prof","highlight":{"output":["^output\\$"],"gc":["^<GC>$"],"stacktrace":["^\\.\\.stacktraceo(n|ff)\\.\\.$"]},"split":"h"}},"evals":[],"jsHooks":[]}</script>
<p>This gives another improvement to performance. It is worth noting that creating an array of multiples is faster than iterating through multiples in R, because the cost of allocating memory is negligible in comparison to the benefit of eliminating the loop. In a programming language such as C, the reverse is often true, as allocating memory is typically expensive in comparison to iteration once compiled into machine code.</p>
</div>
<div id="comments" class="section level2">
<h2>Comments</h2>
<p>Profiling in this scenario is already quite useful, as one can see which parts of the code are critical for performance. In larger applications, profiling is even more useful as one can quickly determine which functions are the most important from a performance perspective: if 1% of computation time is spent in a particular function, very little improvement can be derived by improving it, whereas if 99% of computation time is spent in a function one can conceivably improve performance very substantially by accelerating the implementation or improving the corresponding algorithm itself.</p>
<p>Profiling is also helpful for maintaining code readability and modularity: in some cases performance can be improved by sacrificing readability, or modularity of the code. Doing so can make sense if the code is critical to performance, but it makes little sense when the code is unimportant from a performance perspective.</p>
<p>Finally, when profiling code and trying to improve its performance, good testing tools are very useful for ensuring that any improvement in performance has not come at the cost of breaking existing functionality, including in rare, corner cases.</p>
</div>



  <footer>
  

<script src="//yihui.name/js/math-code.js"></script>
<script async src="//mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>

<script async src="//yihui.name/js/center-img.js"></script>


<script type="text/javascript">
var sc_project=12110974;
var sc_invisible=1;
var sc_security="9b171880";
</script>
<script type="text/javascript"
src="https://www.statcounter.com/counter/counter.js"
async></script>
<noscript><div class="statcounter"><a title="Web Analytics"
href="https://statcounter.com/" target="_blank"><img
class="statcounter"
src="https://c.statcounter.com/12110974/0/9b171880/1/"
alt="Web Analytics"></a></div></noscript>








  


<p align=right>

<a href='https://github.com/awllee/sc1/blob/master/content/profile-debug/profile.Rmd'>View source</a>

|

<a href='https://github.com/awllee/sc1/edit/master/content/profile-debug/profile.Rmd'>Edit source</a>

</p>





<script src="https://utteranc.es/client.js"
        repo="awllee/sc1"
        issue-term="pathname"
        label="utterance"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>



  











<script src="//cdn.jsdelivr.net/combine/gh/highlightjs/cdn-release@9.12.0/build/highlight.min.js,gh/highlightjs/cdn-release@9.12.0/build/languages/r.min.js,gh/highlightjs/cdn-release@9.12.0/build/languages/yaml.min.js,gh/highlightjs/cdn-release@9.12.0/build/languages/tex.min.js,npm/@xiee/utils/js/load-highlight.js" defer></script>



  
  <hr>
  <div class="copyright">© 2020 <a href="https://sites.google.com/view/anthonylee">Anthony Lee</a>, <a href="http://www.bristol.ac.uk/maths/people/feng-yu/index.html">Feng Yu</a>, <a href="https://people.maths.bris.ac.uk/~tk18582/">Tobias Kley</a>, <a href="https://mfasiolo.github.io/">Matteo Fasiolo</a></div>
  
  </footer>
  </article>
  
  </body>
</html>

