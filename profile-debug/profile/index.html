<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Profiling - SC1</title>
    <meta property="og:title" content="Profiling - SC1">
    
    <meta name="twitter:card" content="summary">

    
      
    

    
      
      <meta property="description" content="Profiling in R is fairly straightforward using the profvis package, which builds upon base R’s Rprof functionality.
library(profvis) This is a statistical profiler: it operates by regularly (e.g. &amp;hellip;">
      <meta property="og:description" content="Profiling in R is fairly straightforward using the profvis package, which builds upon base R’s Rprof functionality.
library(profvis) This is a statistical profiler: it operates by regularly (e.g. &amp;hellip;">
      
    

    
    

    

    
    


<link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.12.0/build/styles/github.min.css">



    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Arvo">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Marcellus">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Code+Pro">

<link rel="stylesheet" href="/css/custom.css" />

<link rel="icon" href="/sc1/favicon.ico" type="image/x-icon" />



























<nav class="breadcrumbs">
    
        <a href="sc1">home / </a>
    
        <a href="sc1/profile-debug/">profile-debug / </a>
    
        <a href="sc1/profile-debug/profile/">profile / </a>
    
</nav>

  </head>

  
  <body class="sc1/profile-debug/profile/">
    <header class="masthead">
      <h1><a href="/">SC1</a></h1>

<p class="tagline">Statistical Computing 1</p>

      <nav class="menu">
  <input id="menu-check" type="checkbox" hidden/>
  <label id="menu-label" for="menu-check" class="unselectable" hidden>
    <span class="icon close-icon">✕</span>
    <span class="icon open-icon">☰</span>
    <span class="text">Menu</span>
  </label>
  <ul>
  
  
  <li><a href="sc1/">Home</a></li>
  
  <li><a href="sc1/intro-r/">Intro to R</a></li>
  
  <li><a href="sc1/reproducibility/">Reproducibility</a></li>
  
  <li><a href="sc1/packages/">Packages</a></li>
  
  <li><a href="sc1/common-r/">Common R</a></li>
  
  <li><a href="sc1/functional-oo/">Functional / OO</a></li>
  
  <li><a href="sc1/tidyverse/">Tidyverse</a></li>
  
  <li><a href="sc1/profile-debug/">Performance / Bugs</a></li>
  
  <li><a href="sc1/matrices/">Matrices</a></li>
  
  <li><a href="sc1/optimization/">Optimization</a></li>
  
  <li><a href="sc1/integration/">Integration</a></li>
  
  
  </ul>
</nav>

    </header>

    <article class="main">
      <header class="title">
      
<h1>Profiling</h1>

<h3>
</h3>
<hr>


      </header>






<script src="/sc1rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/sc1rmarkdown-libs/jquery/jquery.min.js"></script>
<script src="/sc1rmarkdown-libs/d3/d3.min.js"></script>
<link href="/sc1rmarkdown-libs/profvis/profvis.css" rel="stylesheet" />
<script src="/sc1rmarkdown-libs/profvis/profvis.js"></script>
<script src="/sc1rmarkdown-libs/profvis/scroll.js"></script>
<link href="/sc1rmarkdown-libs/highlight/textmate.css" rel="stylesheet" />
<script src="/sc1rmarkdown-libs/highlight/highlight.js"></script>
<script src="/sc1rmarkdown-libs/profvis-binding/profvis.js"></script>

<div id="TOC">
<ul>
<li><a href="#updating-a-list-of-primes" id="toc-updating-a-list-of-primes">Updating a list of primes</a></li>
<li><a href="#the-sieve-of-eratosthenes" id="toc-the-sieve-of-eratosthenes">The Sieve of Eratosthenes</a></li>
<li><a href="#comments" id="toc-comments">Comments</a></li>
</ul>
</div>

<p><a href="https://en.wikipedia.org/wiki/Profiling_(computer_programming)">Profiling</a> in R is fairly straightforward using the <a href="https://rstudio.github.io/profvis/"><code>profvis</code></a> package, which builds upon base R’s <code>Rprof</code> functionality.</p>
<pre class="r"><code>library(profvis)</code></pre>
<p>This is a <em>statistical profiler</em>: it operates by regularly (e.g. every few milliseconds) using operating system interrupts to determine what code is being executed. This enables one to build a picture of where the computation is spending most of its time, and is essentially an application of the Monte Carlo method. Although the results are not deterministic, the profiling operation adds very little overhead to the computation.</p>
<p>Statistical profilers can be viewed in contrast to <em>instrumenting profilers</em> of various flavours, which often involve incrementing counters whenever certain events occur. This often involves instrumenting existing code by adding instructions to increment the counters either manually or automatically. For example, incrementing a counter whenever a function is called. Instrumenting profilers can provide very accurate results, but can add substantial overhead to the computation. These tools can be important not only for understanding performance, but also for checking the validity and robustness of code: for example, <a href="https://en.wikipedia.org/wiki/Valgrind">Valgrind</a> is often used in C code to detect memory leaks and memory reference errors.</p>
<p>We consider here profiling various R functions for generating an array of all primes less than or equal to some number.</p>
<div id="updating-a-list-of-primes" class="section level2">
<h2>Updating a list of primes</h2>
<p>A straightforward approach to generating all prime numbers less than some number <span class="math inline">\(N\)</span> is to iterate through the numbers <span class="math inline">\(3,\ldots,N\)</span> and add the current number to the list of primes if there is no divisor of that number in the current list of primes.</p>
<p>In the following, we profile 3 variants of this approach. The first variant is a very inefficient implementation.</p>
<pre class="r"><code>source(&quot;generate-primes-1.R&quot;, keep.source=TRUE)
profvis(generate.primes.upto.1(10000))</code></pre>
<div class="profvis html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-1" style="width:100%;height:600px;"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"message":{"prof":{"time":[1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,4,4,4,4,4,4,5,5,5,5,5,5,6,6,6,6,6,6,7,7,7,7,7,7,8,8,8,8,8,8,9,9,9,9,9,9,10,10,11,11,11,11,11,11,11,12,12,12,12,12,12,13,13,13,13,13,13,14,14,15,15,16,16,16,16,16,16,17,17,18,18,18,18,18,18,19,19,19,19,19,19,20,20,20,20,20,20,21,21,22,22,22,22,22,22,23,23,23,23,23,23,24,24,24,24,24,24,25,25,25,25,25,25,26,26,26,26,26,26,27,27,27,27,27,27,28,28,29,29,30,30,31,31,31,31,31,31,31,32,32,33,33,34,34,35,35,35,35,35,35,36,36,36,36,36,36,37,37,37,37,37,37,38,38,38,38,38,38,39,39,40,40,41,41,41,41,41,41,42,42,43,43,44,44,44,44,44,44,44,45,45,45,45,45,45,45,46,46,46,46,46,46,47,47,47,47,47,47,48,48,49,49,49,49,49,49,49,50,50,51,51,51,51,51,51,52,52,52,52,52,52,53,53,53,53,53,53,54,54,55,55,56,56,56,56,56,56,57,57,57,58,58,59,59,60,60,60,60,60,60,61,61,62,62,62,62,62,62,63,63,63,63,63,63,63,64,64,65,65,65,65,65,65,66,66,67,67,68,68,68,68,68,68,69,69,70,70,71,71,71,71,71,71,72,72,73,73,74,74,74,74,74,74,75,75,76,76,76,76,76,76,77,77,77,77,77,77,77,78,78,79,79,79,79,79,79,80,80,80,80,80,80,81,81,82,82,82,82,82,82,83,83,83,83,83,83,84,84,84,84,84,84,85,85,85,85,85,85,86,86,87,87,87,87,87,87,87,88,88,89,89,90,90,91,91,91,91,91,91,92,92,92,92,92,92,93,93,94,94,94,94,94,94,94,95,95,96,96,96,96,96,96,97,97,97,97,97,97,98,98,98,98,98,98,99,99,99,99,99,99,100,100,100,100,100,100,101,101,101,101,101,101,102,102,103,103,104,104,105,105,105,105,105,105,106,106,107,107,107,107,107,107,107,108,108,108,108,108,108,109,109,109,109,109,109,110,110,110,110,110,110,111,111,112,112,113,113,113,113,113,113,114,114,114,114,114,114,114,115,115,115,115,115,115,116,116,116,116,116,116,117,117,118,118,119,119,119,120,120,120,120,120,120,121,121,121,121,121,121,122,122,122,122,122,122,123,123,123,123,123,123,124,124,124,124,124,124,125,125,125,125,125,125,125,126,126,127,127,127,127,127,127,128,128,128,128,128,128,128,129,129,130,130,131,131,131,131,131,131,131,132,132,132,132,132,132,133,133,133,133,133,133,134,134,135,135,135,135,135,135,135,136,136,136,136,136,136,137,137,137,137,137,137,138,138,139,139,140,140],"depth":[2,1,34,33,32,31,30,29,28,27,26,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,7,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,2,1,6,5,4,3,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,2,1,2,1,7,6,5,4,3,2,1,2,1,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,2,1,6,5,4,3,2,1,2,1,2,1,7,6,5,4,3,2,1,7,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,7,6,5,4,3,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,2,1,6,5,4,3,2,1,3,2,1,2,1,2,1,6,5,4,3,2,1,2,1,6,5,4,3,2,1,7,6,5,4,3,2,1,2,1,6,5,4,3,2,1,2,1,2,1,6,5,4,3,2,1,2,1,2,1,6,5,4,3,2,1,2,1,2,1,6,5,4,3,2,1,2,1,6,5,4,3,2,1,7,6,5,4,3,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,7,6,5,4,3,2,1,2,1,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,7,6,5,4,3,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,2,1,2,1,6,5,4,3,2,1,2,1,7,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,2,1,6,5,4,3,2,1,7,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,2,1,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,7,6,5,4,3,2,1,2,1,6,5,4,3,2,1,7,6,5,4,3,2,1,2,1,2,1,7,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,7,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,2,1,2,1],"label":["lazyLoadDBfetch","local","extractSrcref","getExprSrcref","cb$setcurexpr","cmpCall","cmp","h","tryInline","cmpCall","cmp","cmpForBody","h","tryInline","cmpCall","cmp","h","tryInline","cmpCall","cmp","cmpForBody","h","tryInline","cmpCall","cmp","h","tryInline","cmpCall","cmp","genCode","cmpfun","compiler:::tryCmpfun","eval","eval","eval.parent","local","c","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","<GC>","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","for (j in primes) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","%%","local","%%","local","<GC>","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","%%","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","%%","local","<GC>","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","<GC>","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","<GC>","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","for (j in primes) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","c","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","%%","local","%%","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","<GC>","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","for (j in primes) {","generate.primes.upto.1","eval","eval","eval.parent","local","<GC>","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","for (j in primes) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","<GC>","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","%%","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","<GC>","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","for (j in primes) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","%%","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","<GC>","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","<GC>","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","%%","local","if (i %% j == 0) {","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","for (j in primes) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","<GC>","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","<GC>","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","%%","local","<GC>","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","<GC>","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","for (j in primes) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","%%","local","%%","local"],"filenum":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,1,null,null,1,null,null,null,null,null,1,null,1,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,1,null,null,null,null,null,1,null,1,null,null,1,null,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,1,null,null,null,null,null,1,1,null,1,null,1,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,1,null,1,null,null,null,null,null,1,null,1,null,1,null,null,null,null,null,1,null,1,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,1,null,null,null,null,null,1,null,1,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,1,null,1,null,null,null,null,null,1,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,1,null,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,1,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,1,null],"linenum":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,10,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,null,null,null,null,5,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,6,null,null,6,null,null,null,null,null,6,null,6,null,6,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,6,null,null,null,null,null,6,null,6,null,null,6,null,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,6,null,null,null,null,null,6,null,5,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,10,null,6,null,6,null,null,null,null,null,6,6,null,6,null,6,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,6,null,6,null,null,null,null,null,6,null,6,null,6,null,null,null,null,null,6,null,6,null,6,null,null,null,null,null,6,null,5,null,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,null,null,null,null,5,null,null,null,null,null,6,null,null,null,null,null,6,null,null,6,null,null,null,null,null,6,null,6,null,6,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,6,null,null,null,null,null,6,null,5,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,6,null,6,null,null,null,null,null,6,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,6,null,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,6,6,null,6,null,null,null,null,null,5,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,6,null,null,null,null,null,6,null,null,null,null,null,5,null,null,null,null,null,6,null,6,null,6,null],"memalloc":[11.0634994506836,11.0634994506836,11.9979553222656,11.9979553222656,11.9979553222656,11.9979553222656,11.9979553222656,11.9979553222656,11.9979553222656,11.9979553222656,11.9979553222656,11.9979553222656,11.9979553222656,11.9979553222656,11.9979553222656,11.9979553222656,11.9979553222656,11.9979553222656,11.9979553222656,11.9979553222656,11.9979553222656,11.9979553222656,11.9979553222656,11.9979553222656,11.9979553222656,11.9979553222656,11.9979553222656,11.9979553222656,11.9979553222656,11.9979553222656,11.9979553222656,11.9979553222656,11.9979553222656,11.9979553222656,11.9979553222656,11.9979553222656,12.5173263549805,12.5173263549805,12.9486846923828,12.9486846923828,12.9486846923828,12.9486846923828,12.9486846923828,12.9486846923828,13.3994522094727,13.3994522094727,13.3994522094727,13.3994522094727,13.3994522094727,13.3994522094727,13.8855133056641,13.8855133056641,13.8855133056641,13.8855133056641,13.8855133056641,13.8855133056641,14.430419921875,14.430419921875,14.430419921875,14.430419921875,14.430419921875,14.430419921875,8.70729827880859,8.70729827880859,8.70729827880859,8.70729827880859,8.70729827880859,8.70729827880859,9.73314666748047,9.73314666748047,9.73314666748047,9.73314666748047,9.73314666748047,9.73314666748047,10.6723175048828,10.6723175048828,11.3381500244141,11.3381500244141,11.3381500244141,11.3381500244141,11.3381500244141,11.3381500244141,11.3381500244141,10.0093765258789,10.0093765258789,10.0093765258789,10.0093765258789,10.0093765258789,10.0093765258789,10.9589691162109,10.9589691162109,10.9589691162109,10.9589691162109,10.9589691162109,10.9589691162109,8.81449890136719,8.81449890136719,9.96561431884766,9.96561431884766,10.3546524047852,10.3546524047852,10.3546524047852,10.3546524047852,10.3546524047852,10.3546524047852,11.0516357421875,11.0516357421875,9.048828125,9.048828125,9.048828125,9.048828125,9.048828125,9.048828125,9.94811248779297,9.94811248779297,9.94811248779297,9.94811248779297,9.94811248779297,9.94811248779297,10.8820114135742,10.8820114135742,10.8820114135742,10.8820114135742,10.8820114135742,10.8820114135742,8.84390258789062,8.84390258789062,9.71392822265625,9.71392822265625,9.71392822265625,9.71392822265625,9.71392822265625,9.71392822265625,10.5497207641602,10.5497207641602,10.5497207641602,10.5497207641602,10.5497207641602,10.5497207641602,11.3078002929688,11.3078002929688,11.3078002929688,11.3078002929688,11.3078002929688,11.3078002929688,9.31999206542969,9.31999206542969,9.31999206542969,9.31999206542969,9.31999206542969,9.31999206542969,10.1678771972656,10.1678771972656,10.1678771972656,10.1678771972656,10.1678771972656,10.1678771972656,10.978630065918,10.978630065918,10.978630065918,10.978630065918,10.978630065918,10.978630065918,8.89963531494141,8.89963531494141,9.60242462158203,9.60242462158203,10.4550628662109,10.4550628662109,11.3228912353516,11.3228912353516,11.3228912353516,11.3228912353516,11.3228912353516,11.3228912353516,11.3228912353516,9.31484985351562,9.31484985351562,10.3165054321289,10.3165054321289,11.250617980957,11.250617980957,9.18087005615234,9.18087005615234,9.18087005615234,9.18087005615234,9.18087005615234,9.18087005615234,10.2324142456055,10.2324142456055,10.2324142456055,10.2324142456055,10.2324142456055,10.2324142456055,11.0776290893555,11.0776290893555,11.0776290893555,11.0776290893555,11.0776290893555,11.0776290893555,9.0206298828125,9.0206298828125,9.0206298828125,9.0206298828125,9.0206298828125,9.0206298828125,9.86775207519531,9.86775207519531,10.7788772583008,10.7788772583008,8.65925598144531,8.65925598144531,8.65925598144531,8.65925598144531,8.65925598144531,8.65925598144531,9.60993957519531,9.60993957519531,10.5815734863281,10.5815734863281,11.3288879394531,11.3288879394531,11.3288879394531,11.3288879394531,11.3288879394531,11.3288879394531,11.3288879394531,8.61813354492188,8.61813354492188,8.61813354492188,8.61813354492188,8.61813354492188,8.61813354492188,8.61813354492188,9.10272979736328,9.10272979736328,9.10272979736328,9.10272979736328,9.10272979736328,9.10272979736328,9.74358367919922,9.74358367919922,9.74358367919922,9.74358367919922,9.74358367919922,9.74358367919922,10.7157669067383,10.7157669067383,11.3251037597656,11.3251037597656,11.3251037597656,11.3251037597656,11.3251037597656,11.3251037597656,11.3251037597656,9.38093566894531,9.38093566894531,10.2585906982422,10.2585906982422,10.2585906982422,10.2585906982422,10.2585906982422,10.2585906982422,11.1312408447266,11.1312408447266,11.1312408447266,11.1312408447266,11.1312408447266,11.1312408447266,9.02095794677734,9.02095794677734,9.02095794677734,9.02095794677734,9.02095794677734,9.02095794677734,9.75753784179688,9.75753784179688,10.5481491088867,10.5481491088867,11.3171997070312,11.3171997070312,11.3171997070312,11.3171997070312,11.3171997070312,11.3171997070312,9.07078552246094,9.07078552246094,9.07078552246094,9.88150787353516,9.88150787353516,10.8643188476562,10.8643188476562,8.81827545166016,8.81827545166016,8.81827545166016,8.81827545166016,8.81827545166016,8.81827545166016,9.681640625,9.681640625,10.5479278564453,10.5479278564453,10.5479278564453,10.5479278564453,10.5479278564453,10.5479278564453,11.358039855957,11.358039855957,11.358039855957,11.358039855957,11.358039855957,11.358039855957,11.358039855957,9.267822265625,9.267822265625,10.0969696044922,10.0969696044922,10.0969696044922,10.0969696044922,10.0969696044922,10.0969696044922,10.9402008056641,10.9402008056641,8.87395477294922,8.87395477294922,9.64723205566406,9.64723205566406,9.64723205566406,9.64723205566406,9.64723205566406,9.64723205566406,10.4546203613281,10.4546203613281,11.3155670166016,11.3155670166016,9.52302551269531,9.52302551269531,9.52302551269531,9.52302551269531,9.52302551269531,9.52302551269531,10.4319686889648,10.4319686889648,11.2683944702148,11.2683944702148,9.12061309814453,9.12061309814453,9.12061309814453,9.12061309814453,9.12061309814453,9.12061309814453,9.88114166259766,9.88114166259766,10.6530075073242,10.6530075073242,10.6530075073242,10.6530075073242,10.6530075073242,10.6530075073242,11.3739700317383,11.3739700317383,11.3739700317383,11.3739700317383,11.3739700317383,11.3739700317383,11.3739700317383,9.27986907958984,9.27986907958984,10.1234130859375,10.1234130859375,10.1234130859375,10.1234130859375,10.1234130859375,10.1234130859375,11.2169647216797,11.2169647216797,11.2169647216797,11.2169647216797,11.2169647216797,11.2169647216797,9.08375549316406,9.08375549316406,9.90871429443359,9.90871429443359,9.90871429443359,9.90871429443359,9.90871429443359,9.90871429443359,10.7748565673828,10.7748565673828,10.7748565673828,10.7748565673828,10.7748565673828,10.7748565673828,8.80201721191406,8.80201721191406,8.80201721191406,8.80201721191406,8.80201721191406,8.80201721191406,9.73503112792969,9.73503112792969,9.73503112792969,9.73503112792969,9.73503112792969,9.73503112792969,10.6488265991211,10.6488265991211,11.4123840332031,11.4123840332031,11.4123840332031,11.4123840332031,11.4123840332031,11.4123840332031,11.4123840332031,9.3936767578125,9.3936767578125,10.2832183837891,10.2832183837891,11.1179428100586,11.1179428100586,8.98380279541016,8.98380279541016,8.98380279541016,8.98380279541016,8.98380279541016,8.98380279541016,9.82727813720703,9.82727813720703,9.82727813720703,9.82727813720703,9.82727813720703,9.82727813720703,10.6479797363281,10.6479797363281,11.3886871337891,11.3886871337891,11.3886871337891,11.3886871337891,11.3886871337891,11.3886871337891,11.3886871337891,9.37562561035156,9.37562561035156,10.2961807250977,10.2961807250977,10.2961807250977,10.2961807250977,10.2961807250977,10.2961807250977,11.1982803344727,11.1982803344727,11.1982803344727,11.1982803344727,11.1982803344727,11.1982803344727,9.2886962890625,9.2886962890625,9.2886962890625,9.2886962890625,9.2886962890625,9.2886962890625,10.5116424560547,10.5116424560547,10.5116424560547,10.5116424560547,10.5116424560547,10.5116424560547,11.3691787719727,11.3691787719727,11.3691787719727,11.3691787719727,11.3691787719727,11.3691787719727,9.34748077392578,9.34748077392578,9.34748077392578,9.34748077392578,9.34748077392578,9.34748077392578,10.2033081054688,10.2033081054688,11.2575225830078,11.2575225830078,9.16349792480469,9.16349792480469,9.99338531494141,9.99338531494141,9.99338531494141,9.99338531494141,9.99338531494141,9.99338531494141,10.7951049804688,10.7951049804688,11.4131927490234,11.4131927490234,11.4131927490234,11.4131927490234,11.4131927490234,11.4131927490234,11.4131927490234,9.52803039550781,9.52803039550781,9.52803039550781,9.52803039550781,9.52803039550781,9.52803039550781,10.4556121826172,10.4556121826172,10.4556121826172,10.4556121826172,10.4556121826172,10.4556121826172,11.3346405029297,11.3346405029297,11.3346405029297,11.3346405029297,11.3346405029297,11.3346405029297,9.24172210693359,9.24172210693359,10.0419311523438,10.0419311523438,10.8538055419922,10.8538055419922,10.8538055419922,10.8538055419922,10.8538055419922,10.8538055419922,11.4340515136719,11.4340515136719,11.4340515136719,11.4340515136719,11.4340515136719,11.4340515136719,11.4340515136719,9.40744781494141,9.40744781494141,9.40744781494141,9.40744781494141,9.40744781494141,9.40744781494141,10.2412109375,10.2412109375,10.2412109375,10.2412109375,10.2412109375,10.2412109375,11.0332412719727,11.0332412719727,8.75203704833984,8.75203704833984,9.53195190429688,9.53195190429688,9.53195190429688,10.3037872314453,10.3037872314453,10.3037872314453,10.3037872314453,10.3037872314453,10.3037872314453,11.1106262207031,11.1106262207031,11.1106262207031,11.1106262207031,11.1106262207031,11.1106262207031,8.97709655761719,8.97709655761719,8.97709655761719,8.97709655761719,8.97709655761719,8.97709655761719,9.83729553222656,9.83729553222656,9.83729553222656,9.83729553222656,9.83729553222656,9.83729553222656,10.6881408691406,10.6881408691406,10.6881408691406,10.6881408691406,10.6881408691406,10.6881408691406,11.3227691650391,11.3227691650391,11.3227691650391,11.3227691650391,11.3227691650391,11.3227691650391,11.3227691650391,9.92441558837891,9.92441558837891,10.7254486083984,10.7254486083984,10.7254486083984,10.7254486083984,10.7254486083984,10.7254486083984,11.3604507446289,11.3604507446289,11.3604507446289,11.3604507446289,11.3604507446289,11.3604507446289,11.3604507446289,9.49040222167969,9.49040222167969,10.3884887695312,10.3884887695312,11.3265838623047,11.3265838623047,11.3265838623047,11.3265838623047,11.3265838623047,11.3265838623047,11.3265838623047,9.44248199462891,9.44248199462891,9.44248199462891,9.44248199462891,9.44248199462891,9.44248199462891,10.1749038696289,10.1749038696289,10.1749038696289,10.1749038696289,10.1749038696289,10.1749038696289,10.8238067626953,10.8238067626953,11.3463821411133,11.3463821411133,11.3463821411133,11.3463821411133,11.3463821411133,11.3463821411133,11.3463821411133,9.60049438476562,9.60049438476562,9.60049438476562,9.60049438476562,9.60049438476562,9.60049438476562,10.2813339233398,10.2813339233398,10.2813339233398,10.2813339233398,10.2813339233398,10.2813339233398,11.23681640625,11.23681640625,9.01321411132812,9.01321411132812,9.58473205566406,9.58473205566406],"meminc":[0,0,0.934455871582031,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.519371032714844,0,0.431358337402344,0,0,0,0,0,0.450767517089844,0,0,0,0,0,0.486061096191406,0,0,0,0,0,0.544906616210938,0,0,0,0,0,-5.72312164306641,0,0,0,0,0,1.02584838867188,0,0,0,0,0,0.939170837402344,0,0.66583251953125,0,0,0,0,0,0,-1.32877349853516,0,0,0,0,0,0.949592590332031,0,0,0,0,0,-2.14447021484375,0,1.15111541748047,0,0.3890380859375,0,0,0,0,0,0.696983337402344,0,-2.0028076171875,0,0,0,0,0,0.899284362792969,0,0,0,0,0,0.93389892578125,0,0,0,0,0,-2.03810882568359,0,0.870025634765625,0,0,0,0,0,0.835792541503906,0,0,0,0,0,0.758079528808594,0,0,0,0,0,-1.98780822753906,0,0,0,0,0,0.847885131835938,0,0,0,0,0,0.810752868652344,0,0,0,0,0,-2.07899475097656,0,0.702789306640625,0,0.852638244628906,0,0.867828369140625,0,0,0,0,0,0,-2.00804138183594,0,1.00165557861328,0,0.934112548828125,0,-2.06974792480469,0,0,0,0,0,1.05154418945312,0,0,0,0,0,0.84521484375,0,0,0,0,0,-2.05699920654297,0,0,0,0,0,0.847122192382812,0,0.911125183105469,0,-2.11962127685547,0,0,0,0,0,0.95068359375,0,0.971633911132812,0,0.747314453125,0,0,0,0,0,0,-2.71075439453125,0,0,0,0,0,0,0.484596252441406,0,0,0,0,0,0.640853881835938,0,0,0,0,0,0.972183227539062,0,0.609336853027344,0,0,0,0,0,0,-1.94416809082031,0,0.877655029296875,0,0,0,0,0,0.872650146484375,0,0,0,0,0,-2.11028289794922,0,0,0,0,0,0.736579895019531,0,0.790611267089844,0,0.769050598144531,0,0,0,0,0,-2.24641418457031,0,0,0.810722351074219,0,0.982810974121094,0,-2.04604339599609,0,0,0,0,0,0.863365173339844,0,0.866287231445312,0,0,0,0,0,0.810111999511719,0,0,0,0,0,0,-2.09021759033203,0,0.829147338867188,0,0,0,0,0,0.843231201171875,0,-2.06624603271484,0,0.773277282714844,0,0,0,0,0,0.807388305664062,0,0.860946655273438,0,-1.79254150390625,0,0,0,0,0,0.908943176269531,0,0.83642578125,0,-2.14778137207031,0,0,0,0,0,0.760528564453125,0,0.771865844726562,0,0,0,0,0,0.720962524414062,0,0,0,0,0,0,-2.09410095214844,0,0.843544006347656,0,0,0,0,0,1.09355163574219,0,0,0,0,0,-2.13320922851562,0,0.824958801269531,0,0,0,0,0,0.866142272949219,0,0,0,0,0,-1.97283935546875,0,0,0,0,0,0.933013916015625,0,0,0,0,0,0.913795471191406,0,0.763557434082031,0,0,0,0,0,0,-2.01870727539062,0,0.889541625976562,0,0.834724426269531,0,-2.13414001464844,0,0,0,0,0,0.843475341796875,0,0,0,0,0,0.820701599121094,0,0.740707397460938,0,0,0,0,0,0,-2.0130615234375,0,0.920555114746094,0,0,0,0,0,0.902099609375,0,0,0,0,0,-1.90958404541016,0,0,0,0,0,1.22294616699219,0,0,0,0,0,0.857536315917969,0,0,0,0,0,-2.02169799804688,0,0,0,0,0,0.855827331542969,0,1.05421447753906,0,-2.09402465820312,0,0.829887390136719,0,0,0,0,0,0.801719665527344,0,0.618087768554688,0,0,0,0,0,0,-1.88516235351562,0,0,0,0,0,0.927581787109375,0,0,0,0,0,0.8790283203125,0,0,0,0,0,-2.09291839599609,0,0.800209045410156,0,0.811874389648438,0,0,0,0,0,0.580245971679688,0,0,0,0,0,0,-2.02660369873047,0,0,0,0,0,0.833763122558594,0,0,0,0,0,0.792030334472656,0,-2.28120422363281,0,0.779914855957031,0,0,0.771835327148438,0,0,0,0,0,0.806838989257812,0,0,0,0,0,-2.13352966308594,0,0,0,0,0,0.860198974609375,0,0,0,0,0,0.850845336914062,0,0,0,0,0,0.634628295898438,0,0,0,0,0,0,-1.39835357666016,0,0.801033020019531,0,0,0,0,0,0.635002136230469,0,0,0,0,0,0,-1.87004852294922,0,0.898086547851562,0,0.938095092773438,0,0,0,0,0,0,-1.88410186767578,0,0,0,0,0,0.732421875,0,0,0,0,0,0.648902893066406,0,0.522575378417969,0,0,0,0,0,0,-1.74588775634766,0,0,0,0,0,0.680839538574219,0,0,0,0,0,0.955482482910156,0,-2.22360229492188,0,0.571517944335938,0],"filename":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,"generate-primes-1.R",null,null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R","generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R","generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null]},"interval":10,"files":[{"filename":"generate-primes-1.R","content":"generate.primes.upto.1 <- function(N) {\n  primes <- 2\n  for (i in 3:N) {\n    found.divisor <- FALSE\n    for (j in primes) {\n      if (i %% j == 0) {\n        found.divisor <- TRUE\n      }\n    }\n    if (!found.divisor) primes <- c(primes,i)\n  }\n  return(primes)\n}\n","normpath":"/Users/runner/work/sc1/sc1/content/profile-debug/generate-primes-1.R"}],"prof_output":"/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T//RtmpVSZO2B/file32a77f3d655a.prof","highlight":{"output":["^output\\$"],"gc":["^<GC>$"],"stacktrace":["^\\.\\.stacktraceo(n|ff)\\.\\.$"]},"split":"h"}},"evals":[],"jsHooks":[]}</script>
<p>We see from the <code>profvis</code> results that most of the time is spent in line 6 performing the integer modulus operation. If we look at the code more closely, we can see that it is possible to eliminate some of these operations by breaking the loop over primes as soon as one divisor is found.</p>
<pre class="r"><code>source(&quot;generate-primes-2.R&quot;, keep.source=TRUE)
profvis(generate.primes.upto.2(10000))</code></pre>
<div class="profvis html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-2" style="width:100%;height:600px;"></div>
<script type="application/json" data-for="htmlwidget-2">{"x":{"message":{"prof":{"time":[1,1,1,1,1,1,2,2,2,2,2,2,3,3,4,4,4,4,4,4,4,5,5,6,6,6,6,6,6,7,7,7,7,7,7,8,8,9,9,10,10,10,10,10,10,10,11,11,11,11,11,11,12,12,12,12,12,12,13,13,13,13,13,13,14,14,15,15,15,15,15,15,16,16,16,16,16,16],"depth":[6,5,4,3,2,1,6,5,4,3,2,1,2,1,7,6,5,4,3,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,2,1,7,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1],"label":["if (i %% j == 0) {","generate.primes.upto.2","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.2","eval","eval","eval.parent","local","%%","local","<GC>","if (i %% j == 0) {","generate.primes.upto.2","eval","eval","eval.parent","local","%%","local","for (j in primes) {","generate.primes.upto.2","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.2","eval","eval","eval.parent","local","%%","local","%%","local","<GC>","if (i %% j == 0) {","generate.primes.upto.2","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.2","eval","eval","eval.parent","local","found.divisor <- FALSE","generate.primes.upto.2","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.2","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.2","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.2","eval","eval","eval.parent","local"],"filenum":[1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null],"linenum":[6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,6,null,null,null,null,null,6,null,5,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,null,6,null,null,null,null,null,6,null,null,null,null,null,4,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,null,null,null,null],"memalloc":[9.69760131835938,9.69760131835938,9.69760131835938,9.69760131835938,9.69760131835938,9.69760131835938,10.9062881469727,10.9062881469727,10.9062881469727,10.9062881469727,10.9062881469727,10.9062881469727,11.9570388793945,11.9570388793945,12.803825378418,12.803825378418,12.803825378418,12.803825378418,12.803825378418,12.803825378418,12.803825378418,10.3125381469727,10.3125381469727,11.5,11.5,11.5,11.5,11.5,11.5,12.7114486694336,12.7114486694336,12.7114486694336,12.7114486694336,12.7114486694336,12.7114486694336,10.2953338623047,10.2953338623047,11.9329147338867,11.9329147338867,12.9501419067383,12.9501419067383,12.9501419067383,12.9501419067383,12.9501419067383,12.9501419067383,12.9501419067383,10.4115676879883,10.4115676879883,10.4115676879883,10.4115676879883,10.4115676879883,10.4115676879883,11.6676864624023,11.6676864624023,11.6676864624023,11.6676864624023,11.6676864624023,11.6676864624023,12.8394622802734,12.8394622802734,12.8394622802734,12.8394622802734,12.8394622802734,12.8394622802734,10.0704574584961,10.0704574584961,11.241340637207,11.241340637207,11.241340637207,11.241340637207,11.241340637207,11.241340637207,12.5075836181641,12.5075836181641,12.5075836181641,12.5075836181641,12.5075836181641,12.5075836181641],"meminc":[0,0,0,0,0,0,1.20868682861328,0,0,0,0,0,1.05075073242188,0,0.846786499023438,0,0,0,0,0,0,-2.49128723144531,0,1.18746185302734,0,0,0,0,0,1.21144866943359,0,0,0,0,0,-2.41611480712891,0,1.63758087158203,0,1.01722717285156,0,0,0,0,0,0,-2.53857421875,0,0,0,0,0,1.25611877441406,0,0,0,0,0,1.17177581787109,0,0,0,0,0,-2.76900482177734,0,1.17088317871094,0,0,0,0,0,1.26624298095703,0,0,0,0,0],"filename":["generate-primes-2.R",null,null,null,null,null,"generate-primes-2.R",null,null,null,null,null,"generate-primes-2.R",null,null,"generate-primes-2.R",null,null,null,null,null,"generate-primes-2.R",null,"generate-primes-2.R",null,null,null,null,null,"generate-primes-2.R",null,null,null,null,null,"generate-primes-2.R",null,"generate-primes-2.R",null,null,"generate-primes-2.R",null,null,null,null,null,"generate-primes-2.R",null,null,null,null,null,"generate-primes-2.R",null,null,null,null,null,"generate-primes-2.R",null,null,null,null,null,"generate-primes-2.R",null,"generate-primes-2.R",null,null,null,null,null,"generate-primes-2.R",null,null,null,null,null]},"interval":10,"files":[{"filename":"generate-primes-2.R","content":"generate.primes.upto.2 <- function(N) {\n  primes <- 2\n  for (i in 3:N) {\n    found.divisor <- FALSE\n    for (j in primes) {\n      if (i %% j == 0) {\n        found.divisor <- TRUE\n        break\n      }\n    }\n    if (!found.divisor) primes <- c(primes,i)\n  }\n  return(primes)\n}\n","normpath":"/Users/runner/work/sc1/sc1/content/profile-debug/generate-primes-2.R"}],"prof_output":"/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T//RtmpVSZO2B/file32a71bbb6fa2.prof","highlight":{"output":["^output\\$"],"gc":["^<GC>$"],"stacktrace":["^\\.\\.stacktraceo(n|ff)\\.\\.$"]},"split":"h"}},"evals":[],"jsHooks":[]}</script>
<p>This has dramatically reduced the running time of the algorithm, by a factor of about 10. Although the function is fairly short, we may feel that the code is not easy to read. In particular, the overall idea of the algorithm can be lost in the implementation details. So we can consider the same algorithm, but where we call a helper function called <code>any.divisors</code> instead.</p>
<pre class="r"><code>source(&quot;generate-primes-3.R&quot;, keep.source=TRUE)
profvis(generate.primes.upto.3(10000))</code></pre>
<div class="profvis html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-3" style="width:100%;height:600px;"></div>
<script type="application/json" data-for="htmlwidget-3">{"x":{"message":{"prof":{"time":[1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,3,3,4,4,4,4,4,4,4,5,5,5,5,5,5,5,6,6,6,6,6,6,6,7,7,8,8,8,8,8,8,8,9,9,10,10,10,10,10,10,10,11,11,12,12,13,13,14,14,15,15,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17],"depth":[13,12,11,10,9,8,7,6,5,4,3,2,1,7,6,5,4,3,2,1,2,1,7,6,5,4,3,2,1,7,6,5,4,3,2,1,7,6,5,4,3,2,1,2,1,7,6,5,4,3,2,1,2,1,7,6,5,4,3,2,1,2,1,2,1,2,1,2,1,2,1,7,6,5,4,3,2,1,8,7,6,5,4,3,2,1],"label":["lapply","FUN","lapply","findLocalsList1","findLocalsList","funEnv","make.functionContext","cmpfun","compiler:::tryCmpfun","eval","eval","eval.parent","local","if (i %% j == 0) {","any.divisors","generate.primes.upto.3","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","any.divisors","generate.primes.upto.3","eval","eval","eval.parent","local","if (i %% j == 0) {","any.divisors","generate.primes.upto.3","eval","eval","eval.parent","local","if (i %% j == 0) {","any.divisors","generate.primes.upto.3","eval","eval","eval.parent","local","%%","local","for (j in ps) {","any.divisors","generate.primes.upto.3","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","any.divisors","generate.primes.upto.3","eval","eval","eval.parent","local","%%","local","%%","local","%%","local","c","local","%%","local","if (i %% j == 0) {","any.divisors","generate.primes.upto.3","eval","eval","eval.parent","local","<GC>","if (i %% j == 0) {","any.divisors","generate.primes.upto.3","eval","eval","eval.parent","local"],"filenum":[null,null,null,null,null,null,null,null,1,null,null,null,null,1,1,null,null,null,null,null,1,null,1,1,null,null,null,null,null,1,1,null,null,null,null,null,1,1,null,null,null,null,null,1,null,1,1,null,null,null,null,null,1,null,1,1,null,null,null,null,null,1,null,1,null,1,null,1,null,1,null,1,1,null,null,null,null,null,null,1,1,null,null,null,null,null],"linenum":[null,null,null,null,null,null,null,null,13,null,null,null,null,3,13,null,null,null,null,null,3,null,3,13,null,null,null,null,null,3,13,null,null,null,null,null,3,13,null,null,null,null,null,3,null,2,13,null,null,null,null,null,3,null,3,13,null,null,null,null,null,3,null,3,null,3,null,14,null,3,null,3,13,null,null,null,null,null,null,3,13,null,null,null,null,null],"memalloc":[9.60130310058594,9.60130310058594,9.60130310058594,9.60130310058594,9.60130310058594,9.60130310058594,9.60130310058594,9.60130310058594,9.60130310058594,9.60130310058594,9.60130310058594,9.60130310058594,9.60130310058594,9.983154296875,9.983154296875,9.983154296875,9.983154296875,9.983154296875,9.983154296875,9.983154296875,10.7223510742188,10.7223510742188,11.503303527832,11.503303527832,11.503303527832,11.503303527832,11.503303527832,11.503303527832,11.503303527832,12.2943496704102,12.2943496704102,12.2943496704102,12.2943496704102,12.2943496704102,12.2943496704102,12.2943496704102,9.83019256591797,9.83019256591797,9.83019256591797,9.83019256591797,9.83019256591797,9.83019256591797,9.83019256591797,10.7054061889648,10.7054061889648,11.4895629882812,11.4895629882812,11.4895629882812,11.4895629882812,11.4895629882812,11.4895629882812,11.4895629882812,12.4676132202148,12.4676132202148,9.98263549804688,9.98263549804688,9.98263549804688,9.98263549804688,9.98263549804688,9.98263549804688,9.98263549804688,10.9340515136719,10.9340515136719,11.9186096191406,11.9186096191406,9.67183685302734,9.67183685302734,10.6792373657227,10.6792373657227,11.0794677734375,11.0794677734375,11.9336624145508,11.9336624145508,11.9336624145508,11.9336624145508,11.9336624145508,11.9336624145508,11.9336624145508,12.5993118286133,12.5993118286133,12.5993118286133,12.5993118286133,12.5993118286133,12.5993118286133,12.5993118286133,12.5993118286133],"meminc":[0,0,0,0,0,0,0,0,0,0,0,0,0,0.381851196289062,0,0,0,0,0,0,0.73919677734375,0,0.780952453613281,0,0,0,0,0,0,0.791046142578125,0,0,0,0,0,0,-2.46415710449219,0,0,0,0,0,0,0.875213623046875,0,0.784156799316406,0,0,0,0,0,0,0.978050231933594,0,-2.48497772216797,0,0,0,0,0,0,0.951416015625,0,0.98455810546875,0,-2.24677276611328,0,1.00740051269531,0,0.400230407714844,0,0.854194641113281,0,0,0,0,0,0,0.6656494140625,0,0,0,0,0,0,0],"filename":[null,null,null,null,null,null,null,null,"generate-primes-3.R",null,null,null,null,"generate-primes-3.R","generate-primes-3.R",null,null,null,null,null,"generate-primes-3.R",null,"generate-primes-3.R","generate-primes-3.R",null,null,null,null,null,"generate-primes-3.R","generate-primes-3.R",null,null,null,null,null,"generate-primes-3.R","generate-primes-3.R",null,null,null,null,null,"generate-primes-3.R",null,"generate-primes-3.R","generate-primes-3.R",null,null,null,null,null,"generate-primes-3.R",null,"generate-primes-3.R","generate-primes-3.R",null,null,null,null,null,"generate-primes-3.R",null,"generate-primes-3.R",null,"generate-primes-3.R",null,"generate-primes-3.R",null,"generate-primes-3.R",null,"generate-primes-3.R","generate-primes-3.R",null,null,null,null,null,null,"generate-primes-3.R","generate-primes-3.R",null,null,null,null,null]},"interval":10,"files":[{"filename":"generate-primes-3.R","content":"any.divisors <- function(i, ps) {\n  for (j in ps) {\n    if (i %% j == 0) {\n      return(TRUE)\n    }\n  }\n  return(FALSE)\n}\n\ngenerate.primes.upto.3 <- function(N) {\n  primes <- 2\n  for (i in 3:N) {\n    if (!any.divisors(i, primes)) {\n      primes <- c(primes,i)\n    }\n  }\n  return(primes)\n}\n","normpath":"/Users/runner/work/sc1/sc1/content/profile-debug/generate-primes-3.R"}],"prof_output":"/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T//RtmpVSZO2B/file32a77d0a39a.prof","highlight":{"output":["^output\\$"],"gc":["^<GC>$"],"stacktrace":["^\\.\\.stacktraceo(n|ff)\\.\\.$"]},"split":"h"}},"evals":[],"jsHooks":[]}</script>
<p>It seems reasonable to say that the third version of the algorithm is easier to understand. Moreover, there is little to no performance penalty.</p>
</div>
<div id="the-sieve-of-eratosthenes" class="section level2">
<h2>The Sieve of Eratosthenes</h2>
<p>A more computationally efficient approach is the <a href="https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes">Sieve of Eratosthenes</a>. In this approach, one does not check whether each number is prime by checking divisors. Instead, one starts with a list of numbers from <span class="math inline">\(1\)</span> to <span class="math inline">\(N\)</span> and successively marks all multiples of each prime, in order, as composite. To identify the next prime after <span class="math inline">\(2\)</span> for marking multiples, one simply needs to find the next number not marked composite.</p>
<p>This approach is so much faster, that we consider finding all primes up to <span class="math inline">\(1000000\)</span> instead of up to <span class="math inline">\(10000\)</span>.</p>
<pre class="r"><code>source(&quot;sieve-1.R&quot;, keep.source=TRUE)
profvis(sieve.1(1000000))</code></pre>
<div class="profvis html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-4" style="width:100%;height:600px;"></div>
<script type="application/json" data-for="htmlwidget-4">{"x":{"message":{"prof":{"time":[1,1,1,1,1,1,2,2,2,2,2,2,3,3,3,3,3,3,4,4,4,4,4,4,5,5,5,5,5,5,6,6,6,6,6,6,7,7,7,7,7,7,8,8,8,8,8,8,9,9,9,9,9,9,10,10,10,10,10,10,11,11,11,11,11,11,12,12,12,12,12,12,13,13,13,13,13,13,14,14,14,14,14,14,15,15,15,15,15,15,16,16,16,16,16,16,17,17,17,17,17,17,18,18,18,18,18,18,19,19,19,19,19,19,20,20,20,20,20,20,21,21,21,21,21,21,22,22,22,22,22,22,23,23,23,23,23,23,24,24,24,24,24,24,25,25,25,25,25,25,26,26,26,26,26,26],"depth":[6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1],"label":["candidates <- rep(TRUE,N)","sieve.1","eval","eval","eval.parent","local","s <- s + i","sieve.1","eval","eval","eval.parent","local","s <- s + i","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","s <- s + i","sieve.1","eval","eval","eval.parent","local","s <- s + i","sieve.1","eval","eval","eval.parent","local","while (s <= N) {","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","s <- s + i","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","s <- s + i","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","if (candidates[i]) {","sieve.1","eval","eval","eval.parent","local","for (i in 2:N) {","sieve.1","eval","eval","eval.parent","local","if (candidates[i]) {","sieve.1","eval","eval","eval.parent","local","if (candidates[i]) {","sieve.1","eval","eval","eval.parent","local"],"filenum":[1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null],"linenum":[2,null,null,null,null,null,10,null,null,null,null,null,10,null,null,null,null,null,9,null,null,null,null,null,10,null,null,null,null,null,10,null,null,null,null,null,8,null,null,null,null,null,9,null,null,null,null,null,9,null,null,null,null,null,10,null,null,null,null,null,9,null,null,null,null,null,9,null,null,null,null,null,9,null,null,null,null,null,9,null,null,null,null,null,9,null,null,null,null,null,10,null,null,null,null,null,9,null,null,null,null,null,9,null,null,null,null,null,9,null,null,null,null,null,9,null,null,null,null,null,9,null,null,null,null,null,9,null,null,null,null,null,5,null,null,null,null,null,4,null,null,null,null,null,5,null,null,null,null,null,5,null,null,null,null,null],"memalloc":[9.70278930664062,9.70278930664062,9.70278930664062,9.70278930664062,9.70278930664062,9.70278930664062,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219,13.5175476074219],"meminc":[0,0,0,0,0,0,3.81475830078125,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"filename":["sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null]},"interval":10,"files":[{"filename":"sieve-1.R","content":"sieve.1 <- function(N) {\n  candidates <- rep(TRUE,N)\n  candidates[1] <- FALSE\n  for (i in 2:N) {\n    if (candidates[i]) {\n      # i is prime\n      s <- i*2\n      while (s <= N) {\n        candidates[s] <- FALSE\n        s <- s + i\n      }\n    }\n  }\n  return((1:N)[candidates])\n}\n","normpath":"/Users/runner/work/sc1/sc1/content/profile-debug/sieve-1.R"}],"prof_output":"/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T//RtmpVSZO2B/file32a743e10d8.prof","highlight":{"output":["^output\\$"],"gc":["^<GC>$"],"stacktrace":["^\\.\\.stacktraceo(n|ff)\\.\\.$"]},"split":"h"}},"evals":[],"jsHooks":[]}</script>
<p>We see that most of the time is spent in lines 8–10, which correspond to marking <code>s</code> as composite and incrementing <code>s</code> by the current prime. We can remove some of these computations by noticing that if <span class="math inline">\(i\)</span> is prime then all multiples <span class="math inline">\(2i,3i,\ldots,(i-1)i\)</span> will already have been marked as composite. It follows that one can also stop “sieving” as soon as <span class="math inline">\(i &gt; \sqrt{N}\)</span>.</p>
<pre class="r"><code>source(&quot;sieve-2.R&quot;, keep.source=TRUE)
profvis(sieve.2(1000000))</code></pre>
<div class="profvis html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-5" style="width:100%;height:600px;"></div>
<script type="application/json" data-for="htmlwidget-5">{"x":{"message":{"prof":{"time":[1,1,1,1,1,1,2,2,2,2,2,2,3,3,3,3,3,3,4,4,4,4,4,4,5,5,5,5,5,5,6,6,6,6,6,6,7,7,7,7,7,7,8,8,8,8,8,8,9,9,9,9,9,9,10,10,10,10,10,10,11,11,11,11,11,11,12,12,12,12,12,12,13,13,13,13,13,13,14,14,14,14,14,14,15,15,15,15,15,15,16,16,16,16,16,16],"depth":[6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1],"label":["candidates <- rep(TRUE,N)","sieve.2","eval","eval","eval.parent","local","s <- s + i","sieve.2","eval","eval","eval.parent","local","s <- s + i","sieve.2","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.2","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.2","eval","eval","eval.parent","local","while (s <= N) {","sieve.2","eval","eval","eval.parent","local","s <- s + i","sieve.2","eval","eval","eval.parent","local","while (s <= N) {","sieve.2","eval","eval","eval.parent","local","while (s <= N) {","sieve.2","eval","eval","eval.parent","local","s <- s + i","sieve.2","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.2","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.2","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.2","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.2","eval","eval","eval.parent","local","while (s <= N) {","sieve.2","eval","eval","eval.parent","local","while (s <= N) {","sieve.2","eval","eval","eval.parent","local"],"filenum":[1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null],"linenum":[2,null,null,null,null,null,11,null,null,null,null,null,11,null,null,null,null,null,10,null,null,null,null,null,10,null,null,null,null,null,9,null,null,null,null,null,11,null,null,null,null,null,9,null,null,null,null,null,9,null,null,null,null,null,11,null,null,null,null,null,10,null,null,null,null,null,10,null,null,null,null,null,10,null,null,null,null,null,10,null,null,null,null,null,9,null,null,null,null,null,9,null,null,null,null,null],"memalloc":[13.5321960449219,13.5321960449219,13.5321960449219,13.5321960449219,13.5321960449219,13.5321960449219,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727,13.5322647094727],"meminc":[0,0,0,0,0,0,6.866455078125e-05,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"filename":["sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null]},"interval":10,"files":[{"filename":"sieve-2.R","content":"sieve.2 <- function(N) {\n  candidates <- rep(TRUE,N)\n  candidates[1] <- FALSE\n  sqrt.N <- sqrt(N)\n  for (i in 2:sqrt.N) {\n    if (candidates[i]) {\n      # i is prime\n      s <- i*i\n      while (s <= N) {\n        candidates[s] <- FALSE\n        s <- s + i\n      }\n    }\n  }\n  return((1:N)[candidates])\n}\n","normpath":"/Users/runner/work/sc1/sc1/content/profile-debug/sieve-2.R"}],"prof_output":"/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T//RtmpVSZO2B/file32a7235da72b.prof","highlight":{"output":["^output\\$"],"gc":["^<GC>$"],"stacktrace":["^\\.\\.stacktraceo(n|ff)\\.\\.$"]},"split":"h"}},"evals":[],"jsHooks":[]}</script>
<p>There appears to be a moderate improvement in performance for this size of problem. We notice that a substantial amount of time is spent in the <code>while</code> loop, which mainly involves incrementing <code>s</code> and flagging the corresponding number as composite. We can vectorize this computation and separate it cleanly from the rest of the algorithm, as follows.</p>
<pre class="r"><code>source(&quot;sieve-3.R&quot;, keep.source=TRUE)
profvis(sieve.3(1000000))</code></pre>
<div class="profvis html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-6" style="width:100%;height:600px;"></div>
<script type="application/json" data-for="htmlwidget-6">{"x":{"message":{"prof":{"time":[1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,4,4,4,4,4,4,4,5,5,5,5,5,5,6,6,6,6,6,6,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8],"depth":[7,6,5,4,3,2,1,13,12,11,10,9,8,7,6,5,4,3,2,1,6,5,4,3,2,1,7,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,8,7,6,5,4,3,2,1,7,6,5,4,3,2,1],"label":["seq.default","get.multiples","sieve.3","eval","eval","eval.parent","local","lapply","FUN","lapply","findLocalsList1","findLocalsList","funEnv","make.functionContext","cmpfun","compiler:::tryCmpfun","eval","eval","eval.parent","local","candidates[multiples] <- FALSE","sieve.3","eval","eval","eval.parent","local","seq.default","get.multiples","sieve.3","eval","eval","eval.parent","local","candidates[multiples] <- FALSE","sieve.3","eval","eval","eval.parent","local","candidates[multiples] <- FALSE","sieve.3","eval","eval","eval.parent","local","pmin","seq.default","get.multiples","sieve.3","eval","eval","eval.parent","local","<GC>","return((1:N)[candidates])","sieve.3","eval","eval","eval.parent","local"],"filenum":[null,1,null,null,null,null,null,null,null,null,null,null,null,null,null,1,null,null,null,null,1,null,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,null,null,1,null,null,null,null,null,null,1,null,null,null,null,null],"linenum":[null,14,null,null,null,null,null,null,null,null,null,null,null,null,null,14,null,null,null,null,15,null,null,null,null,null,null,14,null,null,null,null,null,15,null,null,null,null,null,15,null,null,null,null,null,null,null,14,null,null,null,null,null,null,18,null,null,null,null,null],"memalloc":[19.2445678710938,19.2445678710938,19.2445678710938,19.2445678710938,19.2445678710938,19.2445678710938,19.2445678710938,25.0258407592773,25.0258407592773,25.0258407592773,25.0258407592773,25.0258407592773,25.0258407592773,25.0258407592773,25.0258407592773,25.0258407592773,25.0258407592773,25.0258407592773,25.0258407592773,25.0258407592773,31.4885787963867,31.4885787963867,31.4885787963867,31.4885787963867,31.4885787963867,31.4885787963867,41.648551940918,41.648551940918,41.648551940918,41.648551940918,41.648551940918,41.648551940918,41.648551940918,48.6530456542969,48.6530456542969,48.6530456542969,48.6530456542969,48.6530456542969,48.6530456542969,55.3426284790039,55.3426284790039,55.3426284790039,55.3426284790039,55.3426284790039,55.3426284790039,61.1778335571289,61.1778335571289,61.1778335571289,61.1778335571289,61.1778335571289,61.1778335571289,61.1778335571289,61.1778335571289,24.7530975341797,24.7530975341797,24.7530975341797,24.7530975341797,24.7530975341797,24.7530975341797,24.7530975341797],"meminc":[0,0,0,0,0,0,0,5.78127288818359,0,0,0,0,0,0,0,0,0,0,0,0,6.46273803710938,0,0,0,0,0,10.1599731445312,0,0,0,0,0,0,7.00449371337891,0,0,0,0,0,6.68958282470703,0,0,0,0,0,5.835205078125,0,0,0,0,0,0,0,-36.4247360229492,0,0,0,0,0,0],"filename":[null,"sieve-3.R",null,null,null,null,null,null,null,null,null,null,null,null,null,"sieve-3.R",null,null,null,null,"sieve-3.R",null,null,null,null,null,null,"sieve-3.R",null,null,null,null,null,"sieve-3.R",null,null,null,null,null,"sieve-3.R",null,null,null,null,null,null,null,"sieve-3.R",null,null,null,null,null,null,"sieve-3.R",null,null,null,null,null]},"interval":10,"files":[{"filename":"sieve-3.R","content":"get.multiples <- function(i, N) {\n  n <- floor(N/i) - i\n  if (n <= 0) return(NULL)\n  multiples <- seq(i*i,(i+n)*i,i)\n  return(multiples)\n}\n\nsieve.3 <- function(N) {\n  candidates <- rep(TRUE,N)\n  candidates[1] <- FALSE\n  sqrt.N <- sqrt(N)\n  for (i in 2:sqrt.N) {\n    if (candidates[i]) {\n      multiples <- get.multiples(i, N)\n      candidates[multiples] <- FALSE\n    }\n  }\n  return((1:N)[candidates])\n}\n","normpath":"/Users/runner/work/sc1/sc1/content/profile-debug/sieve-3.R"}],"prof_output":"/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T//RtmpVSZO2B/file32a775a3033c.prof","highlight":{"output":["^output\\$"],"gc":["^<GC>$"],"stacktrace":["^\\.\\.stacktraceo(n|ff)\\.\\.$"]},"split":"h"}},"evals":[],"jsHooks":[]}</script>
<p>This gives another improvement to performance. It is worth noting that creating an array of multiples is faster than iterating through multiples in R, because the cost of allocating memory is negligible in comparison to the benefit of eliminating the loop. In a programming language such as C, the reverse is often true, as allocating memory is typically expensive in comparison to iteration once compiled into machine code.</p>
</div>
<div id="comments" class="section level2">
<h2>Comments</h2>
<p>Profiling in this scenario is already quite useful, as one can see which parts of the code are critical for performance. In larger applications, profiling is even more useful as one can quickly determine which functions are the most important from a performance perspective: if 1% of computation time is spent in a particular function, very little improvement can be derived by improving it, whereas if 99% of computation time is spent in a function one can conceivably improve performance very substantially by accelerating the implementation or improving the corresponding algorithm itself.</p>
<p>Profiling is also helpful for maintaining code readability and modularity: in some cases performance can be improved by sacrificing readability, or modularity of the code. Doing so can make sense if the code is critical to performance, but it makes little sense when the code is unimportant from a performance perspective.</p>
<p>Finally, when profiling code and trying to improve its performance, good testing tools are very useful for ensuring that any improvement in performance has not come at the cost of breaking existing functionality, including in rare, corner cases.</p>
</div>



  <footer>
  

<script src="//yihui.name/js/math-code.js"></script>
<script async src="//mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>

<script async src="//yihui.name/js/center-img.js"></script>


<script type="text/javascript">
var sc_project=12110974;
var sc_invisible=1;
var sc_security="9b171880";
</script>
<script type="text/javascript"
src="https://www.statcounter.com/counter/counter.js"
async></script>
<noscript><div class="statcounter"><a title="Web Analytics"
href="https://statcounter.com/" target="_blank"><img
class="statcounter"
src="https://c.statcounter.com/12110974/0/9b171880/1/"
alt="Web Analytics"></a></div></noscript>








  


<p align=right>

<a href='https://github.com/awllee/sc1/blob/master/content/profile-debug/profile.Rmd'>View source</a>

|

<a href='https://github.com/awllee/sc1/edit/master/content/profile-debug/profile.Rmd'>Edit source</a>

</p>





<script src="https://utteranc.es/client.js"
        repo="awllee/sc1"
        issue-term="pathname"
        label="utterance"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>



  











<script src="//cdn.jsdelivr.net/combine/gh/highlightjs/cdn-release@9.12.0/build/highlight.min.js,gh/highlightjs/cdn-release@9.12.0/build/languages/r.min.js,gh/highlightjs/cdn-release@9.12.0/build/languages/yaml.min.js,gh/highlightjs/cdn-release@9.12.0/build/languages/tex.min.js,npm/@xiee/utils/js/load-highlight.js" defer></script>



  
  <hr>
  <div class="copyright">© 2020 <a href="https://sites.google.com/view/anthonylee">Anthony Lee</a>, <a href="http://www.bristol.ac.uk/maths/people/feng-yu/index.html">Feng Yu</a>, <a href="https://people.maths.bris.ac.uk/~tk18582/">Tobias Kley</a>, <a href="https://mfasiolo.github.io/">Matteo Fasiolo</a></div>
  
  </footer>
  </article>
  
  </body>
</html>

