<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Profiling - SC1</title>
    <meta property="og:title" content="Profiling - SC1">
    
    <meta name="twitter:card" content="summary">

    
      
    

    
      
      <meta property="description" content="Profiling in R is fairly straightforward using the profvis package, which builds upon base R’s Rprof functionality.
library(profvis) This is a statistical profiler: it operates by regularly (e.g. &amp;hellip;">
      <meta property="og:description" content="Profiling in R is fairly straightforward using the profvis package, which builds upon base R’s Rprof functionality.
library(profvis) This is a statistical profiler: it operates by regularly (e.g. &amp;hellip;">
      
    

    
    

    

    
    


<link href='//cdn.bootcss.com/highlight.js/9.12.0/styles/github.min.css' rel='stylesheet' type='text/css' />



    <link rel="stylesheet" href="/sc1/css/style.css" />
    <link rel="stylesheet" href="/sc1/css/fonts.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Arvo">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Marcellus">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Code+Pro">

<link rel="stylesheet" href="/sc1/css/custom.css" />

<link rel="icon" href="/sc1/favicon.ico" type="image/x-icon" />























<nav class="breadcrumbs">
    
        <a href="https://awllee.github.io/sc1/">home / </a>
    
        <a href="https://awllee.github.io/sc1/profile-debug/">profile-debug / </a>
    
        <a href="https://awllee.github.io/sc1/profile-debug/profile/">profile / </a>
    
</nav>

  </head>

  
  <body class="sc1">
    <header class="masthead">
      <h1><a href="/sc1/">SC1</a></h1>

<p class="tagline">Statistical Computing 1</p>

      <nav class="menu">
  <input id="menu-check" type="checkbox" />
  <label id="menu-label" for="menu-check" class="unselectable">
    <span class="icon close-icon">✕</span>
    <span class="icon open-icon">☰</span>
    <span class="text">Menu</span>
  </label>
  <ul>
  
  
  <li><a href="/sc1/">Home</a></li>
  
  <li><a href="/sc1/intro-r/">Intro to R</a></li>
  
  <li><a href="/sc1/reproducibility/">Reproducibility</a></li>
  
  <li><a href="/sc1/packages/">Packages</a></li>
  
  <li><a href="/sc1/common-r/">Common R</a></li>
  
  <li><a href="/sc1/functional-oo/">Functional / OO</a></li>
  
  <li><a href="/sc1/tidyverse/">Tidyverse</a></li>
  
  <li><a href="/sc1/profile-debug/">Performance / Bugs</a></li>
  
  <li><a href="/sc1/matrices/">Matrices</a></li>
  
  <li><a href="/sc1/optimization/">Optimization</a></li>
  
  <li><a href="/sc1/integration/">Integration</a></li>
  
  
  </ul>
</nav>

    </header>

    <article class="main">
      <header class="title">
      
<h1>Profiling</h1>

<h3>
</h3>
<hr>


      </header>




<script src="/sc1/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/sc1/rmarkdown-libs/jquery/jquery.min.js"></script>
<script src="/sc1/rmarkdown-libs/d3/d3.min.js"></script>
<link href="/sc1/rmarkdown-libs/profvis/profvis.css" rel="stylesheet" />
<script src="/sc1/rmarkdown-libs/profvis/profvis.js"></script>
<script src="/sc1/rmarkdown-libs/profvis/scroll.js"></script>
<link href="/sc1/rmarkdown-libs/highlight/textmate.css" rel="stylesheet" />
<script src="/sc1/rmarkdown-libs/highlight/highlight.js"></script>
<script src="/sc1/rmarkdown-libs/profvis-binding/profvis.js"></script>

<div id="TOC">
<ul>
<li><a href="#updating-a-list-of-primes">Updating a list of primes</a></li>
<li><a href="#the-sieve-of-eratosthenes">The Sieve of Eratosthenes</a></li>
<li><a href="#comments">Comments</a></li>
</ul>
</div>

<p><a href="https://en.wikipedia.org/wiki/Profiling_(computer_programming)">Profiling</a> in R is fairly straightforward using the <a href="https://rstudio.github.io/profvis/"><code>profvis</code></a> package, which builds upon base R’s <code>Rprof</code> functionality.</p>
<pre class="r"><code>library(profvis)</code></pre>
<p>This is a <em>statistical profiler</em>: it operates by regularly (e.g. every few milliseconds) using operating system interrupts to determine what code is being executed. This enables one to build a picture of where the computation is spending most of its time, and is essentially an application of the Monte Carlo method. Although the results are not deterministic, the profiling operation adds very little overhead to the computation.</p>
<p>Statistical profilers can be viewed in contrast to <em>instrumenting profilers</em> of various flavours, which often involve incrementing counters whenever certain events occur. This often involves instrumenting existing code by adding instructions to increment the counters either manually or automatically. For example, incrementing a counter whenever a function is called. Instrumenting profilers can provide very accurate results, but can add substantial overhead to the computation. These tools can be important not only for understanding performance, but also for checking the validity and robustness of code: for example, <a href="https://en.wikipedia.org/wiki/Valgrind">Valgrind</a> is often used in C code to detect memory leaks and memory reference errors.</p>
<p>We consider here profiling various R functions for generating an array of all primes less than or equal to some number.</p>
<div id="updating-a-list-of-primes" class="section level2">
<h2>Updating a list of primes</h2>
<p>A straightforward approach to generating all prime numbers less than some number <span class="math inline">\(N\)</span> is to iterate through the numbers <span class="math inline">\(3,\ldots,N\)</span> and add the current number to the list of primes if there is no divisor of that number in the current list of primes.</p>
<p>In the following, we profile 3 variants of this approach. The first variant is a very inefficient implementation.</p>
<pre class="r"><code>source(&quot;generate-primes-1.R&quot;, keep.source=TRUE)
profvis(generate.primes.upto.1(10000))</code></pre>
<div id="htmlwidget-1" style="width:100%;height:600px;" class="profvis html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"message":{"prof":{"time":[1,1,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,5,5,5,5,5,5,6,6,6,6,6,6,7,7,8,8,8,8,8,8,9,9,9,9,9,9,10,10,10,10,10,10,11,11,11,11,11,11,12,12,12,12,12,12,13,13,13,13,13,13,14,14,14,14,14,14,15,15,15,15,15,15,16,16,16,16,16,16,17,17,18,18,18,19,19,20,20,21,21,21,21,21,21,22,22,23,23,23,23,23,23,24,24,24,24,24,24,24,25,25,26,26,27,27,27,27,27,27,28,28,28,29,29,29,29,29,29,30,30,30,30,30,30,31,31,31,31,31,31,31,32,32,33,33,33,33,33,33,34,34,34,34,34,34,35,35,36,36,37,37,37,37,37,37,38,38,39,39,39,39,39,39,40,40,41,41,41,41,41,41,42,42,42,42,42,42,43,43,44,44,45,45,45,45,45,45,46,46,46,46,46,46,47,47,48,48,48,48,48,48,49,49,49,49,49,49,50,50,50,50,50,50,51,51,52,52,52,52,52,52,52,53,53,53,53,53,53,54,54,54,54,54,54,55,55,55,55,55,55,56,56,56,56,56,56,57,57,57,57,57,57,58,58,58,58,58,58,59,59,59,59,59,59,60,60,61,61,61,61,61,61,62,62,63,63,64,64,65,65,65,65,65,65,66,66,66,66,66,66,67,67,67,67,67,67,68,68,68,68,68,68,69,69,70,70,70,70,70,70,71,71,71,71,71,71,72,72,72,72,72,72,72,73,73,73,73,73,73,74,74,75,75,76,76,77,77,77,77,77,77,78,78,78,78,78,78,79,79,80,80,80,80,80,80,81,81,81,81,81,81,82,82,82,82,82,82,82,83,83,83,83,83,83,84,84,84,84,84,84,84,85,85,85,85,85,85,86,86,87,87,87,87,87,87,88,88,89,89,90,90,90,90,90,90,91,91,92,92,92,92,92,92,93,93,93,93,93,93,94,94,94,94,94,94,95,95,95,95,95,95,96,96,97,97,98,98,98,98,98,98,98,99,99,100,100,100,100,100,100,101,101,102,102,102,102,102,102,103,103,103,103,103,103,104,104,105,105,105,105,105,105,106,106,106,106,106,106,106,107,107,107,108,108,109,109,110,110,110,110,110,110,111,111,112,112,112,112,112,112,113,113,113,113,113,113,114,114,114,114,114,114,115,115,115,115,115,115,116,116,116,116,116,116,117,117,117,117,117,117,118,118,119,119,119,120,120,121,121,122,122,122,122,122,122,122,123,123,123,123,123,123,124,124,125,125,126,126,127,127,128,128,128,128,128,128,129,129,130,130,130,130,130,130,131,131,131,131,131,131,132,132,133,133,133,133,133,133,134,134,134,134,134,134,135,135,136,136,137,137,137,137,137,137,138,138,139,139,140,140,141,141],"depth":[2,1,2,1,13,12,11,10,9,8,7,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,3,2,1,2,1,2,1,6,5,4,3,2,1,2,1,6,5,4,3,2,1,7,6,5,4,3,2,1,2,1,2,1,6,5,4,3,2,1,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,7,6,5,4,3,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,2,1,6,5,4,3,2,1,2,1,6,5,4,3,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,7,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,6,5,4,3,2,1,2,1,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,7,6,5,4,3,2,1,6,5,4,3,2,1,2,1,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,7,6,5,4,3,2,1,6,5,4,3,2,1,7,6,5,4,3,2,1,6,5,4,3,2,1,2,1,6,5,4,3,2,1,2,1,2,1,6,5,4,3,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,2,1,7,6,5,4,3,2,1,2,1,6,5,4,3,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,6,5,4,3,2,1,7,6,5,4,3,2,1,3,2,1,2,1,2,1,6,5,4,3,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,3,2,1,2,1,2,1,7,6,5,4,3,2,1,6,5,4,3,2,1,2,1,2,1,2,1,2,1,6,5,4,3,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,2,1,2,1,6,5,4,3,2,1,2,1,2,1,2,1,2,1],"label":["lazyLoadDBfetch","local","lazyLoadDBfetch","local","cmpCall","cmp","h","tryInline","cmpCall","cmp","genCode","cmpfun","compiler:::tryCmpfun","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","%%","local","%%","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","<GC>","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","c","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","<GC>","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","for (j in primes) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","<GC>","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","for (j in primes) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","%%","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","<GC>","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","%%","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","<GC>","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","<GC>","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","for (j in primes) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","%%","local","for (j in primes) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","%%","local","<GC>","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","<GC>","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","%%","local","%%","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","%%","local","%%","local","%%","local","<GC>","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","%%","local","%%","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","%%","local","if (i %% j == 0) {","generate.primes.upto.1","eval","eval","eval.parent","local","%%","local","%%","local","%%","local","%%","local"],"filenum":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,1,null,1,null,1,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,1,null,null,null,null,null,1,1,null,1,null,null,null,null,null,1,null,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,1,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,1,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,null,1,null,null,null,null,null,1,1,null,1,null,1,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,1,null,1,null,1,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,1,null,1,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,1,null,null,null,null,null,1,null,1,null,1,null,1,null],"linenum":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,6,6,null,6,null,6,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,null,6,null,null,null,null,null,6,null,10,null,6,null,null,null,null,null,6,6,null,6,null,null,null,null,null,6,null,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,5,null,null,null,null,null,6,null,null,null,null,null,6,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,5,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,6,null,6,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,6,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,null,6,null,null,null,null,null,5,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,6,null,5,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,null,6,null,null,null,null,null,6,6,null,6,null,6,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,6,6,null,6,null,6,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,6,null,6,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,6,null,null,null,null,null,6,null,6,null,6,null,6,null],"memalloc":[9.74925994873047,9.74925994873047,10.5557403564453,10.5557403564453,10.9885025024414,10.9885025024414,10.9885025024414,10.9885025024414,10.9885025024414,10.9885025024414,10.9885025024414,10.9885025024414,10.9885025024414,10.9885025024414,10.9885025024414,10.9885025024414,10.9885025024414,11.6144790649414,11.6144790649414,11.6144790649414,11.6144790649414,11.6144790649414,11.6144790649414,12.1531524658203,12.1531524658203,12.1531524658203,12.1531524658203,12.1531524658203,12.1531524658203,12.6647415161133,12.6647415161133,12.6647415161133,12.6647415161133,12.6647415161133,12.6647415161133,8.38251495361328,8.38251495361328,8.85239410400391,8.85239410400391,8.85239410400391,8.85239410400391,8.85239410400391,8.85239410400391,8.24623870849609,8.24623870849609,8.24623870849609,8.24623870849609,8.24623870849609,8.24623870849609,9.09828186035156,9.09828186035156,9.09828186035156,9.09828186035156,9.09828186035156,9.09828186035156,7.75197601318359,7.75197601318359,7.75197601318359,7.75197601318359,7.75197601318359,7.75197601318359,8.50456237792969,8.50456237792969,8.50456237792969,8.50456237792969,8.50456237792969,8.50456237792969,9.27415466308594,9.27415466308594,9.27415466308594,9.27415466308594,9.27415466308594,9.27415466308594,7.87435150146484,7.87435150146484,7.87435150146484,7.87435150146484,7.87435150146484,7.87435150146484,8.61707305908203,8.61707305908203,8.61707305908203,8.61707305908203,8.61707305908203,8.61707305908203,9.38816833496094,9.38816833496094,9.38816833496094,9.38816833496094,9.38816833496094,9.38816833496094,7.98889923095703,7.98889923095703,9.26390075683594,9.26390075683594,9.26390075683594,7.87675476074219,7.87675476074219,8.62165069580078,8.62165069580078,9.38053131103516,9.38053131103516,9.38053131103516,9.38053131103516,9.38053131103516,9.38053131103516,8.02094268798828,8.02094268798828,8.7696533203125,8.7696533203125,8.7696533203125,8.7696533203125,8.7696533203125,8.7696533203125,9.48876190185547,9.48876190185547,9.48876190185547,9.48876190185547,9.48876190185547,9.48876190185547,9.48876190185547,8.13067626953125,8.13067626953125,8.89080810546875,8.89080810546875,8.27083587646484,8.27083587646484,8.27083587646484,8.27083587646484,8.27083587646484,8.27083587646484,9.02976226806641,9.02976226806641,9.02976226806641,7.65086364746094,7.65086364746094,7.65086364746094,7.65086364746094,7.65086364746094,7.65086364746094,8.77250671386719,8.77250671386719,8.77250671386719,8.77250671386719,8.77250671386719,8.77250671386719,9.48299407958984,9.48299407958984,9.48299407958984,9.48299407958984,9.48299407958984,9.48299407958984,9.48299407958984,8.16846466064453,8.16846466064453,8.91912841796875,8.91912841796875,8.91912841796875,8.91912841796875,8.91912841796875,8.91912841796875,7.59284973144531,7.59284973144531,7.59284973144531,7.59284973144531,7.59284973144531,7.59284973144531,8.35092926025391,8.35092926025391,9.10742950439453,9.10742950439453,7.75406646728516,7.75406646728516,7.75406646728516,7.75406646728516,7.75406646728516,7.75406646728516,9.2569580078125,9.2569580078125,8.51920318603516,8.51920318603516,8.51920318603516,8.51920318603516,8.51920318603516,8.51920318603516,9.29750823974609,9.29750823974609,7.92787933349609,7.92787933349609,7.92787933349609,7.92787933349609,7.92787933349609,7.92787933349609,8.68434143066406,8.68434143066406,8.68434143066406,8.68434143066406,8.68434143066406,8.68434143066406,9.44281005859375,9.44281005859375,8.084228515625,8.084228515625,8.83195495605469,8.83195495605469,8.83195495605469,8.83195495605469,8.83195495605469,8.83195495605469,7.74959564208984,7.74959564208984,7.74959564208984,7.74959564208984,7.74959564208984,7.74959564208984,8.52136993408203,8.52136993408203,9.28554534912109,9.28554534912109,9.28554534912109,9.28554534912109,9.28554534912109,9.28554534912109,7.89785766601562,7.89785766601562,7.89785766601562,7.89785766601562,7.89785766601562,7.89785766601562,8.64482116699219,8.64482116699219,8.64482116699219,8.64482116699219,8.64482116699219,8.64482116699219,9.42748260498047,9.42748260498047,7.48801422119141,7.48801422119141,7.48801422119141,7.48801422119141,7.48801422119141,7.48801422119141,7.48801422119141,8.12143707275391,8.12143707275391,8.12143707275391,8.12143707275391,8.12143707275391,8.12143707275391,8.69528961181641,8.69528961181641,8.69528961181641,8.69528961181641,8.69528961181641,8.69528961181641,7.55362701416016,7.55362701416016,7.55362701416016,7.55362701416016,7.55362701416016,7.55362701416016,8.31214904785156,8.31214904785156,8.31214904785156,8.31214904785156,8.31214904785156,8.31214904785156,9.04800415039062,9.04800415039062,9.04800415039062,9.04800415039062,9.04800415039062,9.04800415039062,7.67719268798828,7.67719268798828,7.67719268798828,7.67719268798828,7.67719268798828,7.67719268798828,8.43613433837891,8.43613433837891,8.43613433837891,8.43613433837891,8.43613433837891,8.43613433837891,9.197509765625,9.197509765625,8.57324981689453,8.57324981689453,8.57324981689453,8.57324981689453,8.57324981689453,8.57324981689453,9.33460235595703,9.33460235595703,7.96257019042969,7.96257019042969,8.72240447998047,8.72240447998047,9.46337127685547,9.46337127685547,9.46337127685547,9.46337127685547,9.46337127685547,9.46337127685547,8.08523559570312,8.08523559570312,8.08523559570312,8.08523559570312,8.08523559570312,8.08523559570312,9.29677581787109,9.29677581787109,9.29677581787109,9.29677581787109,9.29677581787109,9.29677581787109,7.91809844970703,7.91809844970703,7.91809844970703,7.91809844970703,7.91809844970703,7.91809844970703,8.66450500488281,8.66450500488281,9.42581939697266,9.42581939697266,9.42581939697266,9.42581939697266,9.42581939697266,9.42581939697266,8.0478515625,8.0478515625,8.0478515625,8.0478515625,8.0478515625,8.0478515625,9.50411224365234,9.50411224365234,9.50411224365234,9.50411224365234,9.50411224365234,9.50411224365234,9.50411224365234,8.19027709960938,8.19027709960938,8.19027709960938,8.19027709960938,8.19027709960938,8.19027709960938,9.47633361816406,9.47633361816406,8.47466278076172,8.47466278076172,9.21843719482422,9.21843719482422,7.84055328369141,7.84055328369141,7.84055328369141,7.84055328369141,7.84055328369141,7.84055328369141,8.59784698486328,8.59784698486328,8.59784698486328,8.59784698486328,8.59784698486328,8.59784698486328,9.33701324462891,9.33701324462891,7.98543548583984,7.98543548583984,7.98543548583984,7.98543548583984,7.98543548583984,7.98543548583984,8.75522613525391,8.75522613525391,8.75522613525391,8.75522613525391,8.75522613525391,8.75522613525391,9.49629974365234,9.49629974365234,9.49629974365234,9.49629974365234,9.49629974365234,9.49629974365234,9.49629974365234,8.92019653320312,8.92019653320312,8.92019653320312,8.92019653320312,8.92019653320312,8.92019653320312,9.54071807861328,9.54071807861328,9.54071807861328,9.54071807861328,9.54071807861328,9.54071807861328,9.54071807861328,8.314697265625,8.314697265625,8.314697265625,8.314697265625,8.314697265625,8.314697265625,9.05185699462891,9.05185699462891,7.66602325439453,7.66602325439453,7.66602325439453,7.66602325439453,7.66602325439453,7.66602325439453,8.42580413818359,8.42580413818359,9.18791198730469,9.18791198730469,7.80284881591797,7.80284881591797,7.80284881591797,7.80284881591797,7.80284881591797,7.80284881591797,8.57099914550781,8.57099914550781,9.32588195800781,9.32588195800781,9.32588195800781,9.32588195800781,9.32588195800781,9.32588195800781,7.97885894775391,7.97885894775391,7.97885894775391,7.97885894775391,7.97885894775391,7.97885894775391,8.71836090087891,8.71836090087891,8.71836090087891,8.71836090087891,8.71836090087891,8.71836090087891,9.45763397216797,9.45763397216797,9.45763397216797,9.45763397216797,9.45763397216797,9.45763397216797,8.09755706787109,8.09755706787109,8.85767364501953,8.85767364501953,9.56325531005859,9.56325531005859,9.56325531005859,9.56325531005859,9.56325531005859,9.56325531005859,9.56325531005859,8.24607086181641,8.24607086181641,9.01725006103516,9.01725006103516,9.01725006103516,9.01725006103516,9.01725006103516,9.01725006103516,7.65238189697266,7.65238189697266,8.40941619873047,8.40941619873047,8.40941619873047,8.40941619873047,8.40941619873047,8.40941619873047,9.54693603515625,9.54693603515625,9.54693603515625,9.54693603515625,9.54693603515625,9.54693603515625,8.14765930175781,8.14765930175781,8.89454650878906,8.89454650878906,8.89454650878906,8.89454650878906,8.89454650878906,8.89454650878906,9.55865478515625,9.55865478515625,9.55865478515625,9.55865478515625,9.55865478515625,9.55865478515625,9.55865478515625,8.14430999755859,8.14430999755859,8.14430999755859,8.87942504882812,8.87942504882812,7.50778198242188,7.50778198242188,8.25724029541016,8.25724029541016,8.25724029541016,8.25724029541016,8.25724029541016,8.25724029541016,9.02777099609375,9.02777099609375,7.64186096191406,7.64186096191406,7.64186096191406,7.64186096191406,7.64186096191406,7.64186096191406,8.39617919921875,8.39617919921875,8.39617919921875,8.39617919921875,8.39617919921875,8.39617919921875,9.14335632324219,9.14335632324219,9.14335632324219,9.14335632324219,9.14335632324219,9.14335632324219,7.78742218017578,7.78742218017578,7.78742218017578,7.78742218017578,7.78742218017578,7.78742218017578,8.55358123779297,8.55358123779297,8.55358123779297,8.55358123779297,8.55358123779297,8.55358123779297,9.31699371337891,9.31699371337891,9.31699371337891,9.31699371337891,9.31699371337891,9.31699371337891,7.95585632324219,7.95585632324219,8.70808410644531,8.70808410644531,8.70808410644531,7.78792572021484,7.78792572021484,8.78864288330078,8.78864288330078,9.48185729980469,9.48185729980469,9.48185729980469,9.48185729980469,9.48185729980469,9.48185729980469,9.48185729980469,8.20600891113281,8.20600891113281,8.20600891113281,8.20600891113281,8.20600891113281,8.20600891113281,7.57327270507812,7.57327270507812,8.32231903076172,8.32231903076172,9.10800933837891,9.10800933837891,7.70570373535156,7.70570373535156,8.47026824951172,8.47026824951172,8.47026824951172,8.47026824951172,8.47026824951172,8.47026824951172,9.24119567871094,9.24119567871094,7.85070037841797,7.85070037841797,7.85070037841797,7.85070037841797,7.85070037841797,7.85070037841797,9.33284759521484,9.33284759521484,9.33284759521484,9.33284759521484,9.33284759521484,9.33284759521484,8.00186157226562,8.00186157226562,9.07029724121094,9.07029724121094,9.07029724121094,9.07029724121094,9.07029724121094,9.07029724121094,7.70506286621094,7.70506286621094,7.70506286621094,7.70506286621094,7.70506286621094,7.70506286621094,8.47158813476562,8.47158813476562,9.24704742431641,9.24704742431641,7.88333892822266,7.88333892822266,7.88333892822266,7.88333892822266,7.88333892822266,7.88333892822266,8.64932250976562,8.64932250976562,7.67365264892578,7.67365264892578,8.43558502197266,8.43558502197266,9.19052124023438,9.19052124023438],"meminc":[0,0,0.806480407714844,0,0.432762145996094,0,0,0,0,0,0,0,0,0,0,0,0,0.6259765625,0,0,0,0,0,0.538673400878906,0,0,0,0,0,0.511589050292969,0,0,0,0,0,-4.2822265625,0,0.469879150390625,0,0,0,0,0,-0.606155395507812,0,0,0,0,0,0.852043151855469,0,0,0,0,0,-1.34630584716797,0,0,0,0,0,0.752586364746094,0,0,0,0,0,0.76959228515625,0,0,0,0,0,-1.39980316162109,0,0,0,0,0,0.742721557617188,0,0,0,0,0,0.771095275878906,0,0,0,0,0,-1.39926910400391,0,1.27500152587891,0,0,-1.38714599609375,0,0.744895935058594,0,0.758880615234375,0,0,0,0,0,-1.35958862304688,0,0.748710632324219,0,0,0,0,0,0.719108581542969,0,0,0,0,0,0,-1.35808563232422,0,0.7601318359375,0,-0.619972229003906,0,0,0,0,0,0.758926391601562,0,0,-1.37889862060547,0,0,0,0,0,1.12164306640625,0,0,0,0,0,0.710487365722656,0,0,0,0,0,0,-1.31452941894531,0,0.750663757324219,0,0,0,0,0,-1.32627868652344,0,0,0,0,0,0.758079528808594,0,0.756500244140625,0,-1.35336303710938,0,0,0,0,0,1.50289154052734,0,-0.737754821777344,0,0,0,0,0,0.778305053710938,0,-1.36962890625,0,0,0,0,0,0.756462097167969,0,0,0,0,0,0.758468627929688,0,-1.35858154296875,0,0.747726440429688,0,0,0,0,0,-1.08235931396484,0,0,0,0,0,0.771774291992188,0,0.764175415039062,0,0,0,0,0,-1.38768768310547,0,0,0,0,0,0.746963500976562,0,0,0,0,0,0.782661437988281,0,-1.93946838378906,0,0,0,0,0,0,0.6334228515625,0,0,0,0,0,0.5738525390625,0,0,0,0,0,-1.14166259765625,0,0,0,0,0,0.758522033691406,0,0,0,0,0,0.735855102539062,0,0,0,0,0,-1.37081146240234,0,0,0,0,0,0.758941650390625,0,0,0,0,0,0.761375427246094,0,-0.624259948730469,0,0,0,0,0,0.7613525390625,0,-1.37203216552734,0,0.759834289550781,0,0.740966796875,0,0,0,0,0,-1.37813568115234,0,0,0,0,0,1.21154022216797,0,0,0,0,0,-1.37867736816406,0,0,0,0,0,0.746406555175781,0,0.761314392089844,0,0,0,0,0,-1.37796783447266,0,0,0,0,0,1.45626068115234,0,0,0,0,0,0,-1.31383514404297,0,0,0,0,0,1.28605651855469,0,-1.00167083740234,0,0.7437744140625,0,-1.37788391113281,0,0,0,0,0,0.757293701171875,0,0,0,0,0,0.739166259765625,0,-1.35157775878906,0,0,0,0,0,0.769790649414062,0,0,0,0,0,0.741073608398438,0,0,0,0,0,0,-0.576103210449219,0,0,0,0,0,0.620521545410156,0,0,0,0,0,0,-1.22602081298828,0,0,0,0,0,0.737159729003906,0,-1.38583374023438,0,0,0,0,0,0.759780883789062,0,0.762107849121094,0,-1.38506317138672,0,0,0,0,0,0.768150329589844,0,0.7548828125,0,0,0,0,0,-1.34702301025391,0,0,0,0,0,0.739501953125,0,0,0,0,0,0.739273071289062,0,0,0,0,0,-1.36007690429688,0,0.760116577148438,0,0.705581665039062,0,0,0,0,0,0,-1.31718444824219,0,0.77117919921875,0,0,0,0,0,-1.3648681640625,0,0.757034301757812,0,0,0,0,0,1.13751983642578,0,0,0,0,0,-1.39927673339844,0,0.74688720703125,0,0,0,0,0,0.664108276367188,0,0,0,0,0,0,-1.41434478759766,0,0,0.735115051269531,0,-1.37164306640625,0,0.749458312988281,0,0,0,0,0,0.770530700683594,0,-1.38591003417969,0,0,0,0,0,0.754318237304688,0,0,0,0,0,0.747177124023438,0,0,0,0,0,-1.35593414306641,0,0,0,0,0,0.766159057617188,0,0,0,0,0,0.763412475585938,0,0,0,0,0,-1.36113739013672,0,0.752227783203125,0,0,-0.920158386230469,0,1.00071716308594,0,0.693214416503906,0,0,0,0,0,0,-1.27584838867188,0,0,0,0,0,-0.632736206054688,0,0.749046325683594,0,0.785690307617188,0,-1.40230560302734,0,0.764564514160156,0,0,0,0,0,0.770927429199219,0,-1.39049530029297,0,0,0,0,0,1.48214721679688,0,0,0,0,0,-1.33098602294922,0,1.06843566894531,0,0,0,0,0,-1.365234375,0,0,0,0,0,0.766525268554688,0,0.775459289550781,0,-1.36370849609375,0,0,0,0,0,0.765983581542969,0,-0.975669860839844,0,0.761932373046875,0,0.754936218261719,0],"filename":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R","generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R","generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R","generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R","generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,null,null,null,null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null,"generate-primes-1.R",null]},"interval":10,"files":[{"filename":"generate-primes-1.R","content":"generate.primes.upto.1 <- function(N) {\n  primes <- 2\n  for (i in 3:N) {\n    found.divisor <- FALSE\n    for (j in primes) {\n      if (i %% j == 0) {\n        found.divisor <- TRUE\n      }\n    }\n    if (!found.divisor) primes <- c(primes,i)\n  }\n  return(primes)\n}\n","normpath":"/Users/runner/work/sc1/sc1/content/profile-debug/generate-primes-1.R"}],"prof_output":"/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T//RtmpIb5HUl/file1750309dfeec.prof","highlight":{"output":["^output\\$"],"gc":["^<GC>$"],"stacktrace":["^\\.\\.stacktraceo(n|ff)\\.\\.$"]},"split":"h"}},"evals":[],"jsHooks":[]}</script>
<p>We see from the <code>profvis</code> results that most of the time is spent in line 6 performing the integer modulus operation. If we look at the code more closely, we can see that it is possible to eliminate some of these operations by breaking the loop over primes as soon as one divisor is found.</p>
<pre class="r"><code>source(&quot;generate-primes-2.R&quot;, keep.source=TRUE)
profvis(generate.primes.upto.2(10000))</code></pre>
<div id="htmlwidget-2" style="width:100%;height:600px;" class="profvis html-widget"></div>
<script type="application/json" data-for="htmlwidget-2">{"x":{"message":{"prof":{"time":[1,1,2,2,3,3,4,4,4,4,4,4,5,5,5,6,6,7,7,7,7,7,7,8,8,8,8,8,8,9,9,9,9,9,9,9,10,10,10,10,10,10,11,11,12,12,13,13,13,13,13,13,14,14,14,14,14,14,15,15,15,15,15,15,16,16,16,16,16,16,17,17,17,17,17,17],"depth":[2,1,2,1,2,1,6,5,4,3,2,1,3,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,7,6,5,4,3,2,1,6,5,4,3,2,1,2,1,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1],"label":["%%","local","%%","local","%%","local","if (i %% j == 0) {","generate.primes.upto.2","eval","eval","eval.parent","local","if (i %% j == 0) {","%%","local","%%","local","if (i %% j == 0) {","generate.primes.upto.2","eval","eval","eval.parent","local","if (!found.divisor) primes <- c(primes,i)","generate.primes.upto.2","eval","eval","eval.parent","local","<GC>","if (i %% j == 0) {","generate.primes.upto.2","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.2","eval","eval","eval.parent","local","%%","local","%%","local","if (i %% j == 0) {","generate.primes.upto.2","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.2","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.2","eval","eval","eval.parent","local","if (i %% j == 0) {","generate.primes.upto.2","eval","eval","eval.parent","local","for (j in primes) {","generate.primes.upto.2","eval","eval","eval.parent","local"],"filenum":[1,null,1,null,1,null,1,null,null,null,null,null,1,1,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null],"linenum":[6,null,6,null,6,null,6,null,null,null,null,null,6,6,null,6,null,6,null,null,null,null,null,11,null,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,6,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,6,null,null,null,null,null,5,null,null,null,null,null],"memalloc":[8.70429992675781,8.70429992675781,10.5311737060547,10.5311737060547,8.91599273681641,8.91599273681641,9.97286987304688,9.97286987304688,9.97286987304688,9.97286987304688,9.97286987304688,9.97286987304688,8.23605346679688,8.23605346679688,8.23605346679688,10.361930847168,10.361930847168,8.64395904541016,8.64395904541016,8.64395904541016,8.64395904541016,8.64395904541016,8.64395904541016,9.71343994140625,9.71343994140625,9.71343994140625,9.71343994140625,9.71343994140625,9.71343994140625,10.7599105834961,10.7599105834961,10.7599105834961,10.7599105834961,10.7599105834961,10.7599105834961,10.7599105834961,9.09181976318359,9.09181976318359,9.09181976318359,9.09181976318359,9.09181976318359,9.09181976318359,10.1406097412109,10.1406097412109,8.43357849121094,8.43357849121094,9.48706817626953,9.48706817626953,9.48706817626953,9.48706817626953,9.48706817626953,9.48706817626953,10.5318832397461,10.5318832397461,10.5318832397461,10.5318832397461,10.5318832397461,10.5318832397461,8.82528686523438,8.82528686523438,8.82528686523438,8.82528686523438,8.82528686523438,8.82528686523438,9.87962341308594,9.87962341308594,9.87962341308594,9.87962341308594,9.87962341308594,9.87962341308594,8.58334350585938,8.58334350585938,8.58334350585938,8.58334350585938,8.58334350585938,8.58334350585938],"meminc":[0,0,1.82687377929688,0,-1.61518096923828,0,1.05687713623047,0,0,0,0,0,-1.73681640625,0,0,2.12587738037109,0,-1.71797180175781,0,0,0,0,0,1.06948089599609,0,0,0,0,0,1.04647064208984,0,0,0,0,0,0,-1.6680908203125,0,0,0,0,0,1.04878997802734,0,-1.70703125,0,1.05348968505859,0,0,0,0,0,1.04481506347656,0,0,0,0,0,-1.70659637451172,0,0,0,0,0,1.05433654785156,0,0,0,0,0,-1.29627990722656,0,0,0,0,0],"filename":["generate-primes-2.R",null,"generate-primes-2.R",null,"generate-primes-2.R",null,"generate-primes-2.R",null,null,null,null,null,"generate-primes-2.R","generate-primes-2.R",null,"generate-primes-2.R",null,"generate-primes-2.R",null,null,null,null,null,"generate-primes-2.R",null,null,null,null,null,null,"generate-primes-2.R",null,null,null,null,null,"generate-primes-2.R",null,null,null,null,null,"generate-primes-2.R",null,"generate-primes-2.R",null,"generate-primes-2.R",null,null,null,null,null,"generate-primes-2.R",null,null,null,null,null,"generate-primes-2.R",null,null,null,null,null,"generate-primes-2.R",null,null,null,null,null,"generate-primes-2.R",null,null,null,null,null]},"interval":10,"files":[{"filename":"generate-primes-2.R","content":"generate.primes.upto.2 <- function(N) {\n  primes <- 2\n  for (i in 3:N) {\n    found.divisor <- FALSE\n    for (j in primes) {\n      if (i %% j == 0) {\n        found.divisor <- TRUE\n        break\n      }\n    }\n    if (!found.divisor) primes <- c(primes,i)\n  }\n  return(primes)\n}\n","normpath":"/Users/runner/work/sc1/sc1/content/profile-debug/generate-primes-2.R"}],"prof_output":"/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T//RtmpIb5HUl/file1750702b9292.prof","highlight":{"output":["^output\\$"],"gc":["^<GC>$"],"stacktrace":["^\\.\\.stacktraceo(n|ff)\\.\\.$"]},"split":"h"}},"evals":[],"jsHooks":[]}</script>
<p>This has dramatically reduced the running time of the algorithm, by a factor of about 10. Although the function is fairly short, we may feel that the code is not easy to read. In particular, the overall idea of the algorithm can be lost in the implementation details. So we can consider the same algorithm, but where we call a helper function called <code>any.divisors</code> instead.</p>
<pre class="r"><code>source(&quot;generate-primes-3.R&quot;, keep.source=TRUE)
profvis(generate.primes.upto.3(10000))</code></pre>
<div id="htmlwidget-3" style="width:100%;height:600px;" class="profvis html-widget"></div>
<script type="application/json" data-for="htmlwidget-3">{"x":{"message":{"prof":{"time":[1,1,1,1,1,1,2,2,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,6,6,6,6,6,6,6,7,7,7,7,7,7,7,8,8,8,8,8,8,8,9,9,9,9,9,9,9,10,10,10,10,10,10,10,11,11,11,11,11,11,11,12,12,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,16,16,16,16,16,16,16],"depth":[6,5,4,3,2,1,2,1,7,6,5,4,3,2,1,8,7,6,5,4,3,2,1,7,6,5,4,3,2,1,7,6,5,4,3,2,1,7,6,5,4,3,2,1,7,6,5,4,3,2,1,7,6,5,4,3,2,1,7,6,5,4,3,2,1,7,6,5,4,3,2,1,2,1,7,6,5,4,3,2,1,8,7,6,5,4,3,2,1,7,6,5,4,3,2,1,7,6,5,4,3,2,1],"label":["primes <- c(primes,i)","generate.primes.upto.3","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","any.divisors","generate.primes.upto.3","eval","eval","eval.parent","local","<GC>","if (i %% j == 0) {","any.divisors","generate.primes.upto.3","eval","eval","eval.parent","local","if (i %% j == 0) {","any.divisors","generate.primes.upto.3","eval","eval","eval.parent","local","if (i %% j == 0) {","any.divisors","generate.primes.upto.3","eval","eval","eval.parent","local","if (i %% j == 0) {","any.divisors","generate.primes.upto.3","eval","eval","eval.parent","local","if (i %% j == 0) {","any.divisors","generate.primes.upto.3","eval","eval","eval.parent","local","if (i %% j == 0) {","any.divisors","generate.primes.upto.3","eval","eval","eval.parent","local","if (i %% j == 0) {","any.divisors","generate.primes.upto.3","eval","eval","eval.parent","local","if (i %% j == 0) {","any.divisors","generate.primes.upto.3","eval","eval","eval.parent","local","%%","local","if (i %% j == 0) {","any.divisors","generate.primes.upto.3","eval","eval","eval.parent","local","<GC>","if (i %% j == 0) {","any.divisors","generate.primes.upto.3","eval","eval","eval.parent","local","if (!any.divisors(i, primes)) {","any.divisors","generate.primes.upto.3","eval","eval","eval.parent","local","if (i %% j == 0) {","any.divisors","generate.primes.upto.3","eval","eval","eval.parent","local"],"filenum":[1,null,null,null,null,null,1,null,1,1,null,null,null,null,null,null,1,1,null,null,null,null,null,1,1,null,null,null,null,null,1,1,null,null,null,null,null,1,1,null,null,null,null,null,1,1,null,null,null,null,null,1,1,null,null,null,null,null,1,1,null,null,null,null,null,1,1,null,null,null,null,null,1,null,1,1,null,null,null,null,null,null,1,1,null,null,null,null,null,1,1,null,null,null,null,null,1,1,null,null,null,null,null],"linenum":[14,null,null,null,null,null,3,null,3,13,null,null,null,null,null,null,3,13,null,null,null,null,null,3,13,null,null,null,null,null,3,13,null,null,null,null,null,3,13,null,null,null,null,null,3,13,null,null,null,null,null,3,13,null,null,null,null,null,3,13,null,null,null,null,null,3,13,null,null,null,null,null,3,null,3,13,null,null,null,null,null,null,3,13,null,null,null,null,null,13,13,null,null,null,null,null,3,13,null,null,null,null,null],"memalloc":[8.59159851074219,8.59159851074219,8.59159851074219,8.59159851074219,8.59159851074219,8.59159851074219,9.24595642089844,9.24595642089844,9.85181427001953,9.85181427001953,9.85181427001953,9.85181427001953,9.85181427001953,9.85181427001953,9.85181427001953,10.2680816650391,10.2680816650391,10.2680816650391,10.2680816650391,10.2680816650391,10.2680816650391,10.2680816650391,10.2680816650391,9.01829528808594,9.01829528808594,9.01829528808594,9.01829528808594,9.01829528808594,9.01829528808594,9.01829528808594,9.70576477050781,9.70576477050781,9.70576477050781,9.70576477050781,9.70576477050781,9.70576477050781,9.70576477050781,8.77870941162109,8.77870941162109,8.77870941162109,8.77870941162109,8.77870941162109,8.77870941162109,8.77870941162109,9.49617767333984,9.49617767333984,9.49617767333984,9.49617767333984,9.49617767333984,9.49617767333984,9.49617767333984,10.2178955078125,10.2178955078125,10.2178955078125,10.2178955078125,10.2178955078125,10.2178955078125,10.2178955078125,9.33970642089844,9.33970642089844,9.33970642089844,9.33970642089844,9.33970642089844,9.33970642089844,9.33970642089844,10.0543975830078,10.0543975830078,10.0543975830078,10.0543975830078,10.0543975830078,10.0543975830078,10.0543975830078,9.16518402099609,9.16518402099609,9.88097381591797,9.88097381591797,9.88097381591797,9.88097381591797,9.88097381591797,9.88097381591797,9.88097381591797,10.538688659668,10.538688659668,10.538688659668,10.538688659668,10.538688659668,10.538688659668,10.538688659668,10.538688659668,8.92920684814453,8.92920684814453,8.92920684814453,8.92920684814453,8.92920684814453,8.92920684814453,8.92920684814453,9.62722778320312,9.62722778320312,9.62722778320312,9.62722778320312,9.62722778320312,9.62722778320312,9.62722778320312],"meminc":[0,0,0,0,0,0,0.65435791015625,0,0.605857849121094,0,0,0,0,0,0,0.416267395019531,0,0,0,0,0,0,0,-1.24978637695312,0,0,0,0,0,0,0.687469482421875,0,0,0,0,0,0,-0.927055358886719,0,0,0,0,0,0,0.71746826171875,0,0,0,0,0,0,0.721717834472656,0,0,0,0,0,0,-0.878189086914062,0,0,0,0,0,0,0.714691162109375,0,0,0,0,0,0,-0.889213562011719,0,0.715789794921875,0,0,0,0,0,0,0.65771484375,0,0,0,0,0,0,0,-1.60948181152344,0,0,0,0,0,0,0.698020935058594,0,0,0,0,0,0],"filename":["generate-primes-3.R",null,null,null,null,null,"generate-primes-3.R",null,"generate-primes-3.R","generate-primes-3.R",null,null,null,null,null,null,"generate-primes-3.R","generate-primes-3.R",null,null,null,null,null,"generate-primes-3.R","generate-primes-3.R",null,null,null,null,null,"generate-primes-3.R","generate-primes-3.R",null,null,null,null,null,"generate-primes-3.R","generate-primes-3.R",null,null,null,null,null,"generate-primes-3.R","generate-primes-3.R",null,null,null,null,null,"generate-primes-3.R","generate-primes-3.R",null,null,null,null,null,"generate-primes-3.R","generate-primes-3.R",null,null,null,null,null,"generate-primes-3.R","generate-primes-3.R",null,null,null,null,null,"generate-primes-3.R",null,"generate-primes-3.R","generate-primes-3.R",null,null,null,null,null,null,"generate-primes-3.R","generate-primes-3.R",null,null,null,null,null,"generate-primes-3.R","generate-primes-3.R",null,null,null,null,null,"generate-primes-3.R","generate-primes-3.R",null,null,null,null,null]},"interval":10,"files":[{"filename":"generate-primes-3.R","content":"any.divisors <- function(i, ps) {\n  for (j in ps) {\n    if (i %% j == 0) {\n      return(TRUE)\n    }\n  }\n  return(FALSE)\n}\n\ngenerate.primes.upto.3 <- function(N) {\n  primes <- 2\n  for (i in 3:N) {\n    if (!any.divisors(i, primes)) {\n      primes <- c(primes,i)\n    }\n  }\n  return(primes)\n}\n","normpath":"/Users/runner/work/sc1/sc1/content/profile-debug/generate-primes-3.R"}],"prof_output":"/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T//RtmpIb5HUl/file17502d073e44.prof","highlight":{"output":["^output\\$"],"gc":["^<GC>$"],"stacktrace":["^\\.\\.stacktraceo(n|ff)\\.\\.$"]},"split":"h"}},"evals":[],"jsHooks":[]}</script>
<p>It seems reasonable to say that the third version of the algorithm is easier to understand. Moreover, there is little to no performance penalty.</p>
</div>
<div id="the-sieve-of-eratosthenes" class="section level2">
<h2>The Sieve of Eratosthenes</h2>
<p>A more computationally efficient approach is the <a href="https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes">Sieve of Eratosthenes</a>. In this approach, one does not check whether each number is prime by checking divisors. Instead, one starts with a list of numbers from <span class="math inline">\(1\)</span> to <span class="math inline">\(N\)</span> and successively marks all multiples of each prime, in order, as composite. To identify the next prime after <span class="math inline">\(2\)</span> for marking multiples, one simply needs to find the next number not marked composite.</p>
<p>This approach is so much faster, that we consider finding all primes up to <span class="math inline">\(1000000\)</span> instead of up to <span class="math inline">\(10000\)</span>.</p>
<pre class="r"><code>source(&quot;sieve-1.R&quot;, keep.source=TRUE)
profvis(sieve.1(1000000))</code></pre>
<div id="htmlwidget-4" style="width:100%;height:600px;" class="profvis html-widget"></div>
<script type="application/json" data-for="htmlwidget-4">{"x":{"message":{"prof":{"time":[1,1,1,1,1,1,2,2,2,2,2,2,3,3,3,3,3,3,4,4,4,4,4,4,5,5,5,5,5,5,6,6,6,6,6,6,7,7,7,7,7,7,8,8,8,8,8,8,9,9,9,9,9,9,10,10,10,10,10,10,11,11,11,11,11,11,12,12,12,12,12,12,13,13,13,13,13,13,14,14,14,14,14,14,15,15,15,15,15,15,16,16,16,16,16,16,17,17,17,17,17,17,18,18,18,18,18,18,19,19,19,19,19,19,20,20,20,20,20,20,21,21,21,21,21,21,22,22,22,22,22,22,23,23,23,23,23,23,24,24,24,24,24,24,25,25,25,25,25,25,26,26,26,26,26,26,27,27,27,27,27,27,28,28,28,28,28,28],"depth":[6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1],"label":["candidates <- rep(TRUE,N)","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","while (s <= N) {","sieve.1","eval","eval","eval.parent","local","while (s <= N) {","sieve.1","eval","eval","eval.parent","local","s <- s + i","sieve.1","eval","eval","eval.parent","local","while (s <= N) {","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","while (s <= N) {","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","while (s <= N) {","sieve.1","eval","eval","eval.parent","local","s <- s + i","sieve.1","eval","eval","eval.parent","local","s <- s + i","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","s <- s + i","sieve.1","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.1","eval","eval","eval.parent","local","while (s <= N) {","sieve.1","eval","eval","eval.parent","local","if (candidates[i]) {","sieve.1","eval","eval","eval.parent","local","if (candidates[i]) {","sieve.1","eval","eval","eval.parent","local","while (s <= N) {","sieve.1","eval","eval","eval.parent","local"],"filenum":[1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null],"linenum":[2,null,null,null,null,null,9,null,null,null,null,null,8,null,null,null,null,null,8,null,null,null,null,null,10,null,null,null,null,null,8,null,null,null,null,null,9,null,null,null,null,null,8,null,null,null,null,null,9,null,null,null,null,null,9,null,null,null,null,null,9,null,null,null,null,null,8,null,null,null,null,null,10,null,null,null,null,null,10,null,null,null,null,null,9,null,null,null,null,null,9,null,null,null,null,null,9,null,null,null,null,null,9,null,null,null,null,null,9,null,null,null,null,null,9,null,null,null,null,null,9,null,null,null,null,null,9,null,null,null,null,null,10,null,null,null,null,null,9,null,null,null,null,null,8,null,null,null,null,null,5,null,null,null,null,null,5,null,null,null,null,null,8,null,null,null,null,null],"memalloc":[8.53410339355469,8.53410339355469,8.53410339355469,8.53410339355469,8.53410339355469,8.53410339355469,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359,12.3488616943359],"meminc":[0,0,0,0,0,0,3.81475830078125,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"filename":["sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null,"sieve-1.R",null,null,null,null,null]},"interval":10,"files":[{"filename":"sieve-1.R","content":"sieve.1 <- function(N) {\n  candidates <- rep(TRUE,N)\n  candidates[1] <- FALSE\n  for (i in 2:N) {\n    if (candidates[i]) {\n      # i is prime\n      s <- i*2\n      while (s <= N) {\n        candidates[s] <- FALSE\n        s <- s + i\n      }\n    }\n  }\n  return((1:N)[candidates])\n}\n","normpath":"/Users/runner/work/sc1/sc1/content/profile-debug/sieve-1.R"}],"prof_output":"/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T//RtmpIb5HUl/file17505ab14aa4.prof","highlight":{"output":["^output\\$"],"gc":["^<GC>$"],"stacktrace":["^\\.\\.stacktraceo(n|ff)\\.\\.$"]},"split":"h"}},"evals":[],"jsHooks":[]}</script>
<p>We see that most of the time is spent in lines 8–10, which correspond to marking <code>s</code> as composite and incrementing <code>s</code> by the current prime. We can remove some of these computations by noticing that if <span class="math inline">\(i\)</span> is prime then all multiples <span class="math inline">\(2i,3i,\ldots,(i-1)i\)</span> will already have been marked as composite. It follows that one can also stop “sieving” as soon as <span class="math inline">\(i &gt; \sqrt{N}\)</span>.</p>
<pre class="r"><code>source(&quot;sieve-2.R&quot;, keep.source=TRUE)
profvis(sieve.2(1000000))</code></pre>
<div id="htmlwidget-5" style="width:100%;height:600px;" class="profvis html-widget"></div>
<script type="application/json" data-for="htmlwidget-5">{"x":{"message":{"prof":{"time":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,3,3,3,3,3,3,4,4,4,4,4,4,5,5,5,5,5,5,6,6,6,6,6,6,7,7,7,7,7,7,8,8,8,8,8,8,9,9,9,9,9,9,10,10,10,10,10,10,11,11,11,11,11,11,12,12,12,12,12,12,13,13,13,13,13,13,14,14,14,14,14,14,15,15,15,15,15,15],"depth":[19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1],"label":["h","tryInline","cmpCall","cmp","h","tryInline","cmpCall","cmp","h","tryInline","cmpCall","cmp","genCode","cmpfun","compiler:::tryCmpfun","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.2","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.2","eval","eval","eval.parent","local","while (s <= N) {","sieve.2","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.2","eval","eval","eval.parent","local","while (s <= N) {","sieve.2","eval","eval","eval.parent","local","s <- s + i","sieve.2","eval","eval","eval.parent","local","while (s <= N) {","sieve.2","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.2","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.2","eval","eval","eval.parent","local","s <- s + i","sieve.2","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.2","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.2","eval","eval","eval.parent","local","s <- s + i","sieve.2","eval","eval","eval.parent","local","candidates[s] <- FALSE","sieve.2","eval","eval","eval.parent","local"],"filenum":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null],"linenum":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,10,null,null,null,null,null,10,null,null,null,null,null,9,null,null,null,null,null,10,null,null,null,null,null,9,null,null,null,null,null,11,null,null,null,null,null,9,null,null,null,null,null,10,null,null,null,null,null,10,null,null,null,null,null,11,null,null,null,null,null,10,null,null,null,null,null,10,null,null,null,null,null,11,null,null,null,null,null,10,null,null,null,null,null],"memalloc":[8.53054809570312,8.53054809570312,8.53054809570312,8.53054809570312,8.53054809570312,8.53054809570312,8.53054809570312,8.53054809570312,8.53054809570312,8.53054809570312,8.53054809570312,8.53054809570312,8.53054809570312,8.53054809570312,8.53054809570312,8.53054809570312,8.53054809570312,8.53054809570312,8.53054809570312,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383,12.3651809692383],"meminc":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.83463287353516,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"filename":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null,"sieve-2.R",null,null,null,null,null]},"interval":10,"files":[{"filename":"sieve-2.R","content":"sieve.2 <- function(N) {\n  candidates <- rep(TRUE,N)\n  candidates[1] <- FALSE\n  sqrt.N <- sqrt(N)\n  for (i in 2:sqrt.N) {\n    if (candidates[i]) {\n      # i is prime\n      s <- i*i\n      while (s <= N) {\n        candidates[s] <- FALSE\n        s <- s + i\n      }\n    }\n  }\n  return((1:N)[candidates])\n}\n","normpath":"/Users/runner/work/sc1/sc1/content/profile-debug/sieve-2.R"}],"prof_output":"/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T//RtmpIb5HUl/file17503cd65fe4.prof","highlight":{"output":["^output\\$"],"gc":["^<GC>$"],"stacktrace":["^\\.\\.stacktraceo(n|ff)\\.\\.$"]},"split":"h"}},"evals":[],"jsHooks":[]}</script>
<p>There appears to be a moderate improvement in performance for this size of problem. We notice that a substantial amount of time is spent in the <code>while</code> loop, which mainly involves incrementing <code>s</code> and flagging the corresponding number as composite. We can vectorize this computation and separate it cleanly from the rest of the algorithm, as follows.</p>
<pre class="r"><code>source(&quot;sieve-3.R&quot;, keep.source=TRUE)
profvis(sieve.3(1000000))</code></pre>
<div id="htmlwidget-6" style="width:100%;height:600px;" class="profvis html-widget"></div>
<script type="application/json" data-for="htmlwidget-6">{"x":{"message":{"prof":{"time":[1,1,1,1,1,1,1,2,2,2,2,2,2,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8],"depth":[7,6,5,4,3,2,1,6,5,4,3,2,1,7,6,5,4,3,2,1,8,7,6,5,4,3,2,1,7,6,5,4,3,2,1,7,6,5,4,3,2,1,8,7,6,5,4,3,2,1,7,6,5,4,3,2,1],"label":["seq.default","get.multiples","sieve.3","eval","eval","eval.parent","local","candidates[multiples] <- FALSE","sieve.3","eval","eval","eval.parent","local","n <- floor(N/i) - i","get.multiples","sieve.3","eval","eval","eval.parent","local","pmin","seq.default","get.multiples","sieve.3","eval","eval","eval.parent","local","seq.default","get.multiples","sieve.3","eval","eval","eval.parent","local","seq.default","get.multiples","sieve.3","eval","eval","eval.parent","local","pmin","seq.default","get.multiples","sieve.3","eval","eval","eval.parent","local","<GC>","return((1:N)[candidates])","sieve.3","eval","eval","eval.parent","local"],"filenum":[null,1,null,null,null,null,null,1,null,null,null,null,null,1,1,null,null,null,null,null,null,null,1,null,null,null,null,null,null,1,null,null,null,null,null,null,1,null,null,null,null,null,null,null,1,null,null,null,null,null,null,1,null,null,null,null,null],"linenum":[null,14,null,null,null,null,null,15,null,null,null,null,null,2,14,null,null,null,null,null,null,null,14,null,null,null,null,null,null,14,null,null,null,null,null,null,14,null,null,null,null,null,null,null,14,null,null,null,null,null,null,18,null,null,null,null,null],"memalloc":[16.170280456543,16.170280456543,16.170280456543,16.170280456543,16.170280456543,16.170280456543,16.170280456543,23.8473052978516,23.8473052978516,23.8473052978516,23.8473052978516,23.8473052978516,23.8473052978516,23.9634857177734,23.9634857177734,23.9634857177734,23.9634857177734,23.9634857177734,23.9634857177734,23.9634857177734,33.8823089599609,33.8823089599609,33.8823089599609,33.8823089599609,33.8823089599609,33.8823089599609,33.8823089599609,33.8823089599609,42.4023971557617,42.4023971557617,42.4023971557617,42.4023971557617,42.4023971557617,42.4023971557617,42.4023971557617,49.5316314697266,49.5316314697266,49.5316314697266,49.5316314697266,49.5316314697266,49.5316314697266,49.5316314697266,56.2851486206055,56.2851486206055,56.2851486206055,56.2851486206055,56.2851486206055,56.2851486206055,56.2851486206055,56.2851486206055,61.1499252319336,61.1499252319336,61.1499252319336,61.1499252319336,61.1499252319336,61.1499252319336,61.1499252319336],"meminc":[0,0,0,0,0,0,0,7.67702484130859,0,0,0,0,0,0.116180419921875,0,0,0,0,0,0,9.9188232421875,0,0,0,0,0,0,0,8.52008819580078,0,0,0,0,0,0,7.12923431396484,0,0,0,0,0,0,6.75351715087891,0,0,0,0,0,0,0,4.86477661132812,0,0,0,0,0,0],"filename":[null,"sieve-3.R",null,null,null,null,null,"sieve-3.R",null,null,null,null,null,"sieve-3.R","sieve-3.R",null,null,null,null,null,null,null,"sieve-3.R",null,null,null,null,null,null,"sieve-3.R",null,null,null,null,null,null,"sieve-3.R",null,null,null,null,null,null,null,"sieve-3.R",null,null,null,null,null,null,"sieve-3.R",null,null,null,null,null]},"interval":10,"files":[{"filename":"sieve-3.R","content":"get.multiples <- function(i, N) {\n  n <- floor(N/i) - i\n  if (n <= 0) return(NULL)\n  multiples <- seq(i*i,(i+n)*i,i)\n  return(multiples)\n}\n\nsieve.3 <- function(N) {\n  candidates <- rep(TRUE,N)\n  candidates[1] <- FALSE\n  sqrt.N <- sqrt(N)\n  for (i in 2:sqrt.N) {\n    if (candidates[i]) {\n      multiples <- get.multiples(i, N)\n      candidates[multiples] <- FALSE\n    }\n  }\n  return((1:N)[candidates])\n}\n","normpath":"/Users/runner/work/sc1/sc1/content/profile-debug/sieve-3.R"}],"prof_output":"/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T//RtmpIb5HUl/file175048228c0c.prof","highlight":{"output":["^output\\$"],"gc":["^<GC>$"],"stacktrace":["^\\.\\.stacktraceo(n|ff)\\.\\.$"]},"split":"h"}},"evals":[],"jsHooks":[]}</script>
<p>This gives another improvement to performance. It is worth noting that creating an array of multiples is faster than iterating through multiples in R, because the cost of allocating memory is negligible in comparison to the benefit of eliminating the loop. In a programming language such as C, the reverse is often true, as allocating memory is typically expensive in comparison to iteration once compiled into machine code.</p>
</div>
<div id="comments" class="section level2">
<h2>Comments</h2>
<p>Profiling in this scenario is already quite useful, as one can see which parts of the code are critical for performance. In larger applications, profiling is even more useful as one can quickly determine which functions are the most important from a performance perspective: if 1% of computation time is spent in a particular function, very little improvement can be derived by improving it, whereas if 99% of computation time is spent in a function one can conceivably improve performance very substantially by accelerating the implementation or improving the corresponding algorithm itself.</p>
<p>Profiling is also helpful for maintaining code readability and modularity: in some cases performance can be improved by sacrificing readability, or modularity of the code. Doing so can make sense if the code is critical to performance, but it makes little sense when the code is unimportant from a performance perspective.</p>
<p>Finally, when profiling code and trying to improve its performance, good testing tools are very useful for ensuring that any improvement in performance has not come at the cost of breaking existing functionality, including in rare, corner cases.</p>
</div>


  <footer>
  

<script src="//yihui.name/js/math-code.js"></script>
<script async src="//mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>

<script async src="//yihui.name/js/center-img.js"></script>


<script type="text/javascript">
var sc_project=12110974;
var sc_invisible=1;
var sc_security="9b171880";
</script>
<script type="text/javascript"
src="https://www.statcounter.com/counter/counter.js"
async></script>
<noscript><div class="statcounter"><a title="Web Analytics"
href="https://statcounter.com/" target="_blank"><img
class="statcounter"
src="https://c.statcounter.com/12110974/0/9b171880/1/"
alt="Web Analytics"></a></div></noscript>








  


<p align=right>

<a href='https://github.com/awllee/sc1/blob/master/content/profile-debug/profile.Rmd'>View source</a>

|

<a href='https://github.com/awllee/sc1/edit/master/content/profile-debug/profile.Rmd'>Edit source</a>

</p>





<script src="https://utteranc.es/client.js"
        repo="awllee/sc1"
        issue-term="pathname"
        label="utterance"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>



  



<script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>



<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/yaml.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/tex.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



  
  <hr>
  <div class="copyright">© 2020 <a href="https://sites.google.com/view/anthonylee">Anthony Lee</a>, <a href="http://www.bristol.ac.uk/maths/people/feng-yu/index.html">Feng Yu</a>, <a href="https://people.maths.bris.ac.uk/~tk18582/">Tobias Kley</a>, <a href="https://mfasiolo.github.io/">Matteo Fasiolo</a></div>
  
  </footer>
  </article>
  
  </body>
</html>

